<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-10-25 Tue 20:57 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AlBasmala: @@html: &lt;br&gt;@@ Blogging with Emacs &amp; Org-mode (•̀ᴗ•́)و</title>
<meta name="author" content="Musa Al-hassy" />
<meta name="description" content="How my blog is setup (•̀ᴗ•́)و" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<style> ul {list-style-type: " ✓"} </style>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
"HTML-CSS": {
styles: {
".MathJax nobr": {
padding: "0.5em 0.5em"
},
}
}
});
</script>
<style>  summary:hover {background:pink;} </style>
        <style>
        /* From: https://endlessparentheses.com/public/css/endless.css */
        /* See also: https://meta.superuser.com/questions/4788/css-for-the-new-kbd-style */
        kbd
        {
          -moz-border-radius: 6px;
          -moz-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          -webkit-border-radius: 6px;
          -webkit-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          background-color: #f7f7f7;
          border: 1px solid #ccc;
          border-radius: 6px;
          box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          color: #333;
          display: inline-block;
          font-family: 'Droid Sans Mono', monospace;
          font-size: 80%;
          font-weight: normal;
          line-height: inherit;
          margin: 0 .1em;
          padding: .08em .4em;
          text-shadow: 0 1px 0 #fff;
          word-spacing: -4px;

          box-shadow: 2px 2px 2px #222; /* MA: An extra I've added. */
        }
        </style>
        <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/tooltipster.bundle.min.css"/>

        <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-punk.min.css" />

        <script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                document.write(unescape('%3Cscript src="https://code.jquery.com/jquery-1.10.0.min.js"%3E%3C/script%3E'));
            }
        </script>

         <script type="text/javascript"            src="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/js/tooltipster.bundle.min.js"></script>

          <script>
                 $(document).ready(function() {
                     $('.tooltip').tooltipster({
                         theme: 'tooltipster-punk',
                         contentAsHTML: true,
                         animation: 'grow',
                         delay: [100,500],
                         // trigger: 'click'
                         trigger: 'custom',
                         triggerOpen: {
                             mouseenter: true
                         },
                         triggerClose: {
                             originClick: true,
                             scroll: true
                         }
         });
                 });
             </script>

        <style>
           abbr {color: red;}

           .tooltip { border-bottom: 1px dotted #000;
                      color:red;
                      text-decoration: none;}
        </style>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2> <a href="javascript:window.scrollTo(0,0)" style="color: black !important; border-bottom: none !important;" class="tooltip" title="Go to the top of the page"> Ξ </a> </h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#HTML-Header">1. <i>Style</i>! ✨ What do we want to be inserted into the head of every page?</a>
<ul>
<li><a href="#Style-Header-Elements">1.1. <a href="#Style-Header-Elements">Style Header Elements</a></a></li>
<li><a href="#Script-Header-Elements">1.2. <a href="#Script-Header-Elements">Script Header Elements</a></a></li>
<li><a href="#Lisp-Header-Elements">1.3. <a href="#Lisp-Header-Elements">Lisp Header Elements</a></a></li>
</ul>
</li>
<li><a href="#Seamlessly-Previewing-Articles-within-Emacs">2. <i>Seamlessly</i> Previewing Articles <i>within</i> Emacs 😲</a>
<ul>
<li><a href="#HTML-Postamble">2.1. <a href="#HTML-Postamble">Using My Blog Styles Anywhere: doc:org-link/blog</a></a></li>
<li><a href="#A-function-to-insert-doc-org-link-blog-into-a-buffer">2.2. <a href="#A-function-to-insert-doc-org-link-blog-into-a-buffer">A function to insert doc:org-link/blog into a buffer</a></a></li>
<li><a href="#org57be5b7">2.3. Inserting doc:org-link/blog <i>seamlessly</i> via the export process; <i>then</i> preview with every save</a></li>
<li><a href="#orgb4fdc6b">2.4. Abstract Special Block&#xa0;&#xa0;&#xa0;<span class="tag"><span class="Relocate_near_blog_setup">Relocate_near_blog_setup</span></span></a></li>
</ul>
</li>
<li><a href="#Floating-TOC">3. <a href="#Floating-TOC">Ξ: Floating <i>Table of Contents</i></a></a></li>
<li><a href="#Ensuring-Useful-HTML-Anchors">4. <a href="#Ensuring-Useful-HTML-Anchors">Ensuring Useful HTML Anchors</a></a></li>
<li><a href="#Clickable-Headlines">5. <a href="#Clickable-Headlines">Clickable Headlines</a></a></li>
<li><a href="#Curvy-Source-Blocks">6. <a href="#Curvy-Source-Blocks">Curvy Source Blocks &amp; Pink Inline</a></a></li>
<li><a href="#Blog-Banner">7. <a href="#Blog-Banner">Blog Banner and Dynamic Code Highlighting</a></a></li>
<li><a href="#Images">8. <a href="#Images">Article Tile &amp; Image</a></a>
<ul>
<li><a href="#Making-this-work-with-org-notes-style-and-org-static-blog">8.1. <a href="#Making-this-work-with-org-notes-style-and-org-static-blog">Making this work with <code>org-notes-style</code> and <code>org-static-blog</code></a></a></li>
</ul>
</li>
<li><a href="#MathJax-Support">9. <a href="#MathJax-Support">MathJax Support &#x2014; \(e^{i \cdot \pi} + 1 = 0\)</a></a>
<ul>
<li><a href="#orgd9d7d6c">9.1. Unicode Warning!</a></li>
<li><a href="#org7dd10d9">9.2. Rule Resurrection</a></li>
<li><a href="#COMMENT-nice-math-spacing">9.3. <i>Making Math Stick-out with Spacing!</i>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TODO">TODO</span>&#xa0;<span class="LowPriority">LowPriority</span></span></a></li>
</ul>
</li>
<li><a href="#https-github-com-bastibe-org-static-blog-org-static-block">10. <a href="#https-github-com-bastibe-org-static-blog-org-static-block">Using org-static-block</a></a>
<ul>
<li><a href="#Article-Footers">10.1. <a href="#Article-Footers">Article Footers: HTMLized Source and Git History</a></a></li>
<li><a href="#multipost-pages">10.2. <a href="#multipost-pages">The Index Page</a></a></li>
</ul>
</li>
<li><a href="#org31f83af">11. Actually publishing an article</a></li>
<li><a href="#blog-new-article">12. <a href="#blog-new-article">Getting Started:  <code>blog/new-article</code></a></a></li>
<li><a href="#the-name">13. <a href="#the-name">The name: al-bas-mala</a></a></li>
<li><a href="#COMMENT-Using-a-Custom-Domain-alhassy-com">14. <a href="#COMMENT-Using-a-Custom-Domain-alhassy-com">Appendix: Using a Custom Domain: <code>alhassy.com</code></a></a></li>
</ul>
</div>
</div>
<p>
<div class="header">
  <a href="https://alhassy.github.io/" class="logo">Life & Computing Science</a>
  <br>
    <a href="https://alhassy.github.io/AlBasmala">AlBasmala</a>
    <a href="https://alhassy.github.io/archive">Archive</a>
    <a href="https://alhassy.github.io/tags">Tags</a>
    <a href="https://alhassy.github.io/rss.xml">RSS</a>
    <a href="https://alhassy.github.io/about">About</a>
</div><style>  summary:hover {background:pink;} </style>
        <style>
        /* From: https://endlessparentheses.com/public/css/endless.css */
        /* See also: https://meta.superuser.com/questions/4788/css-for-the-new-kbd-style */
        kbd
        {
          -moz-border-radius: 6px;
          -moz-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          -webkit-border-radius: 6px;
          -webkit-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          background-color: #f7f7f7;
          border: 1px solid #ccc;
          border-radius: 6px;
          box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
          color: #333;
          display: inline-block;
          font-family: 'Droid Sans Mono', monospace;
          font-size: 80%;
          font-weight: normal;
          line-height: inherit;
          margin: 0 .1em;
          padding: .08em .4em;
          text-shadow: 0 1px 0 #fff;
          word-spacing: -4px;

          box-shadow: 2px 2px 2px #222; /* MA: An extra I've added. */
        }
        </style>
        <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/tooltipster.bundle.min.css"/>

        <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-punk.min.css" />

        <script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                document.write(unescape('%3Cscript src="https://code.jquery.com/jquery-1.10.0.min.js"%3E%3C/script%3E'));
            }
        </script>

         <script type="text/javascript"            src="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/js/tooltipster.bundle.min.js"></script>

          <script>
                 $(document).ready(function() {
                     $('.tooltip').tooltipster({
                         theme: 'tooltipster-punk',
                         contentAsHTML: true,
                         animation: 'grow',
                         delay: [100,500],
                         // trigger: 'click'
                         trigger: 'custom',
                         triggerOpen: {
                             mouseenter: true
                         },
                         triggerClose: {
                             originClick: true,
                             scroll: true
                         }
         });
                 });
             </script>

        <style>
           abbr {color: red;}

           .tooltip { border-bottom: 1px dotted #000;
                      color:red;
                      text-decoration: none;}
        </style>
        <meta name="author" content="Musa Al-hassy">
    <meta name="referrer" content="no-referrer"><link href="usual-org-front-matter.css" rel="stylesheet" type="text/css" /><link href="org-notes-style.css" rel="stylesheet" type="text/css" /><link href="floating-toc.css" rel="stylesheet" type="text/css" /><link href="blog-banner.css" rel="stylesheet" type="text/css" /><link rel="icon" href="images/favicon.png"><script type="text/javascript">
   /*
   @licstart  The following is the entire license notice for the
   JavaScript code in this tag.

   Copyright (C) 2012-2020 Free Software Foundation, Inc.

   The JavaScript code in this tag is free software: you can
   redistribute it and/or modify it under the terms of the GNU
   General Public License (GNU GPL) as published by the Free Software
   Foundation, either version 3 of the License, or (at your option)
   any later version.  The code is distributed WITHOUT ANY WARRANTY;
   without even the implied warranty of MERCHANTABILITY or FITNESS
   FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

   As additional permission under GNU GPL version 3 section 7, you
   may distribute non-source (e.g., minimized or compacted) forms of
   that code without the copy of the GNU GPL normally required by
   section 4, provided you include this license notice and a URL
   through which recipients can access the Corresponding Source.


   @licend  The above is the entire license notice
   for the JavaScript code in this tag.
   */
   <!--/*--><![CDATA[/*><!--*/
    function CodeHighlightOn(elem, id)
    {
      var target = document.getElementById(id);
      if(null != target) {
        elem.cacheClassElem = elem.className;
        elem.cacheClassTarget = target.className;
        target.className = "code-highlighted";
        elem.className   = "code-highlighted";
      }
    }
    function CodeHighlightOff(elem, id)
    {
      var target = document.getElementById(id);
      if(elem.cacheClassElem)
        elem.className = elem.cacheClassElem;
      if(elem.cacheClassTarget)
        target.className = elem.cacheClassTarget;
    }
   /*]]>*///-->
   </script><script type="text/x-mathjax-config">
       MathJax.Hub.Config({
           displayAlign: "center",
           displayIndent: "0em",

           "HTML-CSS": { scale: 100,
                           linebreaks: { automatic: "false" },
                           webFont: "TeX"
                          },
           SVG: {scale: 100,
                 linebreaks: { automatic: "false" },
                 font: "TeX"},
           NativeMML: {scale: 100},
           TeX: { equationNumbers: {autoNumber: "AMS"},
                  MultLineWidth: "85%",
                  TagSide: "right",
                  TagIndent: ".8em"
                }
   });
   </script>
   <script type="text/javascript"
           src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
   <link href="https://alhassy.github.io/org-notes-style.css" rel="stylesheet" type="text/css" /><link href="https://alhassy.github.io/floating-toc.css" rel="stylesheet" type="text/css" /><link href="https://alhassy.github.io/blog-banner.css" rel="stylesheet" type="text/css" /><br><center><h1 class="post-title">AlBasmala:  <br> Blogging with Emacs & Org-mode (•̀ᴗ•́)و</h1></center> <script> window.parent.document.title =  window.parent.document.title.replace(/@@.*@@/, "") </script>
</p>

<center><a href="https://alhassy.github.io/tags.html"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 16" width="15" height="16"><path fill-rule="evenodd" d="M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1 3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41 0l4.59-4.59a.996.996 0 000-1.41L7.73 1.73zM2.38 7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59 1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73 4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z"></path></svg> </a><a href="https://alhassy.github.io/tag-emacs.html"><img src="https://img.shields.io/badge/-emacs-grey?logo=nil"></a> <a href="https://alhassy.github.io/tag-org.html"><img src="https://img.shields.io/badge/-org-grey?logo=nil"></a> <a href="https://alhassy.github.io/tag-html.html"><img src="https://img.shields.io/badge/-html-grey?logo=nil"></a> <a href="https://alhassy.github.io/tag-css.html"><img src="https://img.shields.io/badge/-css-grey?logo=nil"></a> <a href="https://alhassy.github.io/tag-javascript.html"><img src="https://img.shields.io/badge/-javascript-grey?logo=nil"></a> <a href="https://alhassy.github.io/tag-git.html"><img src="https://img.shields.io/badge/-git-grey?logo=nil"></a></center>
<center><a href="./images/org_logo.png" class="tooltip" title="Image credit “./images/org_logo.png”"><img src="./images/org_logo.png" alt="Article image" width="150" height="150" align="top"/></a></center>

<div class="abstract" style="border: 1px solid black;padding: 10px; margin-top: 50px; margin-bottom: 50px;margin-right: 150px; margin-left: 80px; background-color: lightblue;"><center> <strong class="tooltip"title="What's the goal of this article?"> Abstract </strong> </center>
<p>
How my blog is setup (•̀ᴗ•́)و
</p>

<p>
Here are some notable features of my blog.
</p>

<ul class="org-ul">
<li>Org-mode, a rich markup, to write articles ♥‿♥</li>
<li>Tags and RSS feed for blog articles &#x2014; §<a href="#orgb5a9163">10</a></li>
<li>A nice blog banner &#x2014; §<a href="#org6ce2c0a">7</a></li>
<li><i>Dynamically</i> highlighting code from references in prose &#x2014; §<a href="#org6ce2c0a">7</a></li>
<li>Tooltips, folded regions, and badges &#x2014; <a href="https://alhassy.github.io/org-special-block-extras/"><img src="https://img.shields.io/badge/org--special--block--extras-2.0-informational?logo=Gnu-Emacs"></a></li>
<li>Overall nice looking HTML style &#x2014; <a href="http://taopeng.me/org-notes-style/">org-notes-style</a></li>
<li>Beautiful math using LaTeX notation, \(\forall \phi ⇒ \exists \phi\) &#x2014;
§<a href="#orgc4bf97e">9</a></li>
<li>A floating, yet unobtrusive, table of contents &#x2014; §<a href="#org9979b54">3</a></li>
<li>Headings are clickable links with the resulting anchors being
Github-like &#x2014; §<a href="#org6037ba9">4</a> and §<a href="#orgca27482">5</a></li>
<li>Comments for blog readers &#x2014; §<a href="#org5ab2572">10.1</a></li>
<li>Articles have dedicated images, §<a href="#org9c06119">8</a>, which are displayed
on the blog's welcome page along with the article's abstract, §<a href="#org5d5eac5">10.2</a>
<ul class="org-ul">
<li>Auto-generated index/sitemap that shows an image and short abstract of each article</li>
</ul></li>
<li>Augment article footers to link to the Org source and to the Github history
&#x2014; §<a href="#org79b1cc7">10.1</a>
<ul class="org-ul">
<li>Org source is colourised!</li>
</ul></li>
<li>Article titles may contain arbitrary <code>@@html: ...@@</code> <i>yet</i> still render nicely in both the frame tab and page title,
thanks to <abbr class="tooltip" title="Provide the styles for “www.alhassy.com”’s “header” and “footer”.<br><br>The use of “blog:footer” aims to provide a clickable list of tags, produce an HTMLized version of the Org source,<br>and provides a Disqus comments sections. For details, consult the ‘org-static-blog-post-postamble’ function.<br><br>Finally, I want to avoid any ‘@@backend:...@@’ from appearing in the browser frame’s title.<br>We accomplish this with the help of some handy-dandy JavaScript: Just use “blog:sanitise-title”.<br>">org-link/blog</abbr>.</li>
<li><i>Dynamically</i> adjust amount of time left until user finishes reading the
article &#x2014; §<a href="#org79b1cc7">10.1</a></li>
<li>Style inline code and tables &#x2014; §<a href="#orge184bbb">6</a></li>
<li>Unfurling links &#x2014; §<a href="#org4de258e">12</a></li>
</ul>


</div>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="red">
                         Typical workflow: How do I publish an article?
                      </font>
                    </strong>
                  </summary>
<ol class="org-ol">
<li><code class="src src-emacs-lisp">(org-babel-load-file <span style="color: #689d6a;">"~/blog/AlBasmala.org"</span>)</code></li>

<li><p>
Invoke <abbr class="tooltip" title="Make a new article for my blog; prompting for the necessary ingredients.<br><br>If the filename entered already exists, we simply write to it.<br>The user notices this and picks a new name.<br><br>This sets up a new article based on existing tags and posts.<br>+ Use C-SPC to select multiple tag items<br><br>Moreover it also enables ‘org-preview-html-mode’ so that on every alteration,<br>followed by a save, C-x C-s, will result in a live preview of the blog article,<br>nearly instantaneously.">blog/new-article</abbr>
</p>

<p>
This sets up a new article based on existing tags and posts. Moreover it also does:
</p>
<ol class="org-ol">
<li>Do <code>M-x org-preview-html-mode</code></li>
<li>Now every alteration, followed by a save <abbr class="tooltip" style="border: none; text-decoration: none;" title="C-x C-s ∷ save-buffer<br>Save current buffer in visited file if modified.<br>Variations are described below.<br><br>By default, makes the previous version into a backup file<br> if previously requested or if this is the first save.<br>Prefixed with one C-u, marks this version<br> to become a backup when the next save is done.<br>Prefixed with two C-u’s,<br> makes the previous version into a backup file.<br>Prefixed with three C-u’s, marks this version<br> to become a backup when the next save is done,<br> and makes the previous version into a backup file.<br><br>With a numeric prefix argument of 0, never make the previous version<br>into a backup file.<br><br>Note that the various variables that control backups, such<br>as ‘version-control’, ‘backup-enable-predicate’, ‘vc-make-backup-files’,<br>and ‘backup-inhibited’, to name just the more popular ones, still<br>control whether a backup will actually be produced, even when you<br>invoke this command prefixed with two or three C-u’s.<br><br>If a file’s name is FOO, the names of its numbered backup versions are<br> FOO.<code>i</code> for various integers i.&emsp;A non-numbered backup file is called FOO<code>.<br>Numeric backups (rather than FOO</code>) will be made if value of<br> ‘version-control’ is not the atom ‘never’ and either there are already<br> numeric versions of the file being backed up, or ‘version-control’ is<br> non-nil.<br>We don’t want excessive versions piling up, so there are variables<br> ‘kept-old-versions’, which tells Emacs how many oldest versions to keep,<br> and ‘kept-new-versions’, which tells how many newest versions to keep.<br> Defaults are 2 old versions and 2 new.<br>‘dired-kept-versions’ controls dired’s clean-directory (.) command.<br>If ‘delete-old-versions’ is nil, system will query user<br> before trimming versions.&emsp;Otherwise it does it silently.<br><br>If ‘vc-make-backup-files’ is nil, which is the default,<br> no backup files are made for files managed by version control.<br> (This is because the version control system itself records previous versions.)<br><br>See the subroutine ‘basic-save-buffer’ for more information.<br><br>(fn &optional ARG)"><kbd style="border-color: red">C-x C-s</kbd></abbr> will result in a live preview of the blog article, nearly
instantaneous.</li>
</ol></li>

<li><p>
Until content:
</p>
<ol class="org-ol">
<li>Write, write, and write!</li>
<li><abbr class="tooltip" style="border: none; text-decoration: none;" title="C-x C-s ∷ save-buffer<br>Save current buffer in visited file if modified.<br>Variations are described below.<br><br>By default, makes the previous version into a backup file<br> if previously requested or if this is the first save.<br>Prefixed with one C-u, marks this version<br> to become a backup when the next save is done.<br>Prefixed with two C-u’s,<br> makes the previous version into a backup file.<br>Prefixed with three C-u’s, marks this version<br> to become a backup when the next save is done,<br> and makes the previous version into a backup file.<br><br>With a numeric prefix argument of 0, never make the previous version<br>into a backup file.<br><br>Note that the various variables that control backups, such<br>as ‘version-control’, ‘backup-enable-predicate’, ‘vc-make-backup-files’,<br>and ‘backup-inhibited’, to name just the more popular ones, still<br>control whether a backup will actually be produced, even when you<br>invoke this command prefixed with two or three C-u’s.<br><br>If a file’s name is FOO, the names of its numbered backup versions are<br> FOO.<code>i</code> for various integers i.&emsp;A non-numbered backup file is called FOO<code>.<br>Numeric backups (rather than FOO</code>) will be made if value of<br> ‘version-control’ is not the atom ‘never’ and either there are already<br> numeric versions of the file being backed up, or ‘version-control’ is<br> non-nil.<br>We don’t want excessive versions piling up, so there are variables<br> ‘kept-old-versions’, which tells Emacs how many oldest versions to keep,<br> and ‘kept-new-versions’, which tells how many newest versions to keep.<br> Defaults are 2 old versions and 2 new.<br>‘dired-kept-versions’ controls dired’s clean-directory (.) command.<br>If ‘delete-old-versions’ is nil, system will query user<br> before trimming versions.&emsp;Otherwise it does it silently.<br><br>If ‘vc-make-backup-files’ is nil, which is the default,<br> no backup files are made for files managed by version control.<br> (This is because the version control system itself records previous versions.)<br><br>See the subroutine ‘basic-save-buffer’ for more information.<br><br>(fn &optional ARG)"><kbd style="border-color: red">C-x C-s</kbd></abbr></li>
<li>Preview</li>
</ol>

<p>
Consider using <abbr class="tooltip" style="border: none; text-decoration: none;" title="C-x n s ∷ org-narrow-to-subtree<br>Narrow buffer to the current subtree."><kbd style="border-color: red">C-x n s</kbd></abbr>, or <abbr class="tooltip" style="border: none; text-decoration: none;" title="C-x n n ∷ narrow-to-region<br>Restrict editing in this buffer to the current region.<br>The rest of the text becomes temporarily invisible and untouchable<br>but is not deleted; if you save the buffer in a file, the invisible<br>text is included in the file.&emsp;C-x n w makes all visible again.<br>See also ‘save-restriction’.<br><br>When calling from Lisp, pass two arguments START and END:<br>positions (integers or markers) bounding the text that should<br>remain visible.<br><br>This function has :around advice: ‘ad-Advice-narrow-to-region’.<br><br>(fn START END)"><kbd style="border-color: red">C-x n n</kbd></abbr>, to focus your attention on a
particular section, <i>thereby</i> dramatically
increasing the speed at which the preview renders.
</p></li>

<li>Execute <abbr class="tooltip" title="Place HTML files in the right place, update arhives, index, rss, tags; git push!">blog/publish-current-article</abbr> when you're done.
<ul class="org-ul">
<li>This gets the new article showing up in index, RSS, archive, and updates the tags.</li>
</ul></li>
<li>NOTE: It takes about. 20secs ~ 1min for the changes to be live on github pages.</li>
</ol>


</details>

<div id="outline-container-HTML-Header" class="outline-2">
<h2 id="HTML-Header"><span class="section-number-2">1.</span> <a href="#orgee9fb08"><i>Style</i>! ✨ What do we want to be inserted into the head of every page?</a></h2>
<div class="outline-text-2" id="text-HTML-Header">
<p>
<a id="orgbe8000b"></a>
</p>

<p>
For each article, I'll have a set of styles loaded <i>as well as</i> a set of <code>&lt;script&gt;</code> code fragments. Here is an overview of
these fragments, and throughout the rest of this article, I'll tangle code to where appropriate.
</p>
</div>

<div id="outline-container-Style-Header-Elements" class="outline-3">
<h3 id="Style-Header-Elements"><span class="section-number-3">1.1.</span> <a href="#Style-Header-Elements">Style Header Elements</a></h3>
<div class="outline-text-3" id="text-Style-Header-Elements">
<p>
Firstly, we want some styling rules to be loaded.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr">1: </span>(concat
<span class="linenr">2: </span><span style="color: #689d6a;">"&lt;meta name=\"author\" content=\"Musa Al-hassy\"&gt;</span>
<span class="linenr">3: </span><span style="color: #689d6a;"> &lt;meta name=\"referrer\" content=\"no-referrer\"&gt;"</span>
<span id="coderef-usualCSS" class="coderef-off"><span class="linenr">4: </span><span style="color: #689d6a;">"&lt;link href=\"usual-org-front-matter.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span id="coderef-orgNotesCSS" class="coderef-off"><span class="linenr">5: </span><span style="color: #689d6a;">"&lt;link href=\"org-notes-style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span id="coderef-tocCSS" class="coderef-off"><span class="linenr">6: </span><span style="color: #689d6a;">"&lt;link href=\"floating-toc.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span id="coderef-bannerCSS" class="coderef-off"><span class="linenr">7: </span><span style="color: #689d6a;">"&lt;link href=\"blog-banner.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span class="linenr">8: </span><span style="color: #689d6a;">"&lt;link rel=\"icon\" href=\"images/favicon.png\"&gt;"</span>)
</pre>
</div>

<dl class="org-dl">
<dt><a href="#coderef-usualCSS" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-usualCSS');" onmouseout="CodeHighlightOff(this, 'coderef-usualCSS');">usual-org-front-matter.css</a> <a href="usual-org-front-matter.css"><img src="https://img.shields.io/badge/--success?logo=css3"></a></dt><dd>Org-static-blog ignores any styling exported by Org, so let's bring that back
in. I just exported this file with the usual <kbd style="">C-c C-e h o</kbd>, then saved the CSS
it produced.</dd>

<dt><a href="#coderef-orgNotesCSS" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-orgNotesCSS');" onmouseout="CodeHighlightOff(this, 'coderef-orgNotesCSS');">org-notes-style.css</a> <a href="org-notes-style.css"><img src="https://img.shields.io/badge/--success?logo=css3"></a></dt><dd>I like the rose-style of this <a href="http://taopeng.me/org-notes-style/">org-notes-style</a> for HTML export.  However, it
seems loading the CSS directly from its homepage does not work, so I've copied
the CSS file for my blog.</dd>

<dt><a href="#coderef-tocCSS" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-tocCSS');" onmouseout="CodeHighlightOff(this, 'coderef-tocCSS');">floating-toc.css</a> <a href="floating-toc.css"><img src="https://img.shields.io/badge/--success?logo=css3"></a></dt><dd>I want to have an unobtrusive floating table of contents, see
§<a href="#org9979b54">3</a>.</dd>

<dt><a href="#coderef-bannerCSS" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-bannerCSS');" onmouseout="CodeHighlightOff(this, 'coderef-bannerCSS');">blog-banner.css</a> <a href="blog-banner.css"><img src="https://img.shields.io/badge/--success?logo=css3"></a></dt><dd>Finally, we want a beautiful welcome mat, see §<a href="#org6ce2c0a">7</a>.</dd>
</dl>
</div>
</div>

<div id="outline-container-Script-Header-Elements" class="outline-3">
<h3 id="Script-Header-Elements"><span class="section-number-3">1.2.</span> <a href="#Script-Header-Elements">Script Header Elements</a></h3>
<div class="outline-text-3" id="text-Script-Header-Elements">
<p>
In addition, we have two more pieces we would like to add to the header: Support
for <i>dynamic</i> code-line highlighting, §<a href="#org6ce2c0a">7</a>, and support for using
LaTeX-style notation to write mathematics, §<a href="#orgc4bf97e">9</a>.  We will use a
<a href="https://github.com/alhassy/emacs.d#what-does-literate-programming-look-like">noweb-ref</a> named <code>my-html-header</code> to refer to them, which are then catenated below.
</p>
<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Full, tangled, value of org-static-blog-page-header
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-emacs-lisp"> (<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-page-header
  (concat
   org-html-head-extra  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Altered by &#8216;</span><span style="color: #076678; font-weight: bold;">org-special-block-extras</span><span style="color: #a89984;">&#8217;</span>
   (concat
   <span style="color: #689d6a;">"&lt;meta name=\"author\" content=\"Musa Al-hassy\"&gt;</span>
<span style="color: #689d6a;">    &lt;meta name=\"referrer\" content=\"no-referrer\"&gt;"</span>
<span id="coderef-usualCSS" class="coderef-off">   <span style="color: #689d6a;">"&lt;link href=\"usual-org-front-matter.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span id="coderef-orgNotesCSS" class="coderef-off">   <span style="color: #689d6a;">"&lt;link href=\"org-notes-style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span id="coderef-tocCSS" class="coderef-off">   <span style="color: #689d6a;">"&lt;link href=\"floating-toc.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
<span id="coderef-bannerCSS" class="coderef-off">   <span style="color: #689d6a;">"&lt;link href=\"blog-banner.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span></span>
   <span style="color: #689d6a;">"&lt;link rel=\"icon\" href=\"images/favicon.png\"&gt;"</span>)
   <span style="color: #689d6a;">"&lt;script type=\"text/javascript\"&gt;</span>
<span style="color: #689d6a;">   /*</span>
<span style="color: #689d6a;">   @licstart  The following is the entire license notice for the</span>
<span style="color: #689d6a;">   JavaScript code in this tag.</span>
<span style="color: #689d6a;">   </span>
<span style="color: #689d6a;">   Copyright (C) 2012-2020 Free Software Foundation, Inc.</span>
<span style="color: #689d6a;">   </span>
<span style="color: #689d6a;">   The JavaScript code in this tag is free software: you can</span>
<span style="color: #689d6a;">   redistribute it and/or modify it under the terms of the GNU</span>
<span style="color: #689d6a;">   General Public License (GNU GPL) as published by the Free Software</span>
<span style="color: #689d6a;">   Foundation, either version 3 of the License, or (at your option)</span>
<span style="color: #689d6a;">   any later version.  The code is distributed WITHOUT ANY WARRANTY;</span>
<span style="color: #689d6a;">   without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<span style="color: #689d6a;">   FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.</span>
<span style="color: #689d6a;">   </span>
<span style="color: #689d6a;">   As additional permission under GNU GPL version 3 section 7, you</span>
<span style="color: #689d6a;">   may distribute non-source (e.g., minimized or compacted) forms of</span>
<span style="color: #689d6a;">   that code without the copy of the GNU GPL normally required by</span>
<span style="color: #689d6a;">   section 4, provided you include this license notice and a URL</span>
<span style="color: #689d6a;">   through which recipients can access the Corresponding Source.</span>
<span style="color: #689d6a;">   </span>
<span style="color: #689d6a;">   </span>
<span style="color: #689d6a;">   @licend  The above is the entire license notice</span>
<span style="color: #689d6a;">   for the JavaScript code in this tag.</span>
<span style="color: #689d6a;">   */</span>
<span style="color: #689d6a;">   &lt;!--/*--&gt;&lt;![CDATA[/*&gt;&lt;!--*/</span>
<span style="color: #689d6a;">    function CodeHighlightOn(elem, id)</span>
<span style="color: #689d6a;">    {</span>
<span style="color: #689d6a;">      var target = document.getElementById(id);</span>
<span style="color: #689d6a;">      if(null != target) {</span>
<span style="color: #689d6a;">        elem.cacheClassElem = elem.className;</span>
<span style="color: #689d6a;">        elem.cacheClassTarget = target.className;</span>
<span style="color: #689d6a;">        target.className = \"code-highlighted\";</span>
<span style="color: #689d6a;">        elem.className   = \"code-highlighted\";</span>
<span style="color: #689d6a;">      }</span>
<span style="color: #689d6a;">    }</span>
<span style="color: #689d6a;">    function CodeHighlightOff(elem, id)</span>
<span style="color: #689d6a;">    {</span>
<span style="color: #689d6a;">      var target = document.getElementById(id);</span>
<span style="color: #689d6a;">      if(elem.cacheClassElem)</span>
<span style="color: #689d6a;">        elem.className = elem.cacheClassElem;</span>
<span style="color: #689d6a;">      if(elem.cacheClassTarget)</span>
<span style="color: #689d6a;">        target.className = elem.cacheClassTarget;</span>
<span style="color: #689d6a;">    }</span>
<span style="color: #689d6a;">   /*]]&gt;*///--&gt;</span>
<span style="color: #689d6a;">   &lt;/script&gt;"</span>
   <span style="color: #689d6a;">"&lt;script type=\"text/x-mathjax-config\"&gt;</span>
<span style="color: #689d6a;">       MathJax.Hub.Config({</span>
<span style="color: #689d6a;">           displayAlign: \"center\",</span>
<span style="color: #689d6a;">           displayIndent: \"0em\",</span>
<span style="color: #689d6a;">   </span>
<span style="color: #689d6a;">           \"HTML-CSS\": { scale: 100,</span>
<span style="color: #689d6a;">                           linebreaks: { automatic: \"false\" },</span>
<span style="color: #689d6a;">                           webFont: \"TeX\"</span>
<span style="color: #689d6a;">                          },</span>
<span style="color: #689d6a;">           SVG: {scale: 100,</span>
<span style="color: #689d6a;">                 linebreaks: { automatic: \"false\" },</span>
<span style="color: #689d6a;">                 font: \"TeX\"},</span>
<span style="color: #689d6a;">           NativeMML: {scale: 100},</span>
<span style="color: #689d6a;">           TeX: { equationNumbers: {autoNumber: \"AMS\"},</span>
<span style="color: #689d6a;">                  MultLineWidth: \"85%\",</span>
<span style="color: #689d6a;">                  TagSide: \"right\",</span>
<span style="color: #689d6a;">                  TagIndent: \".8em\"</span>
<span style="color: #689d6a;">                }</span>
<span style="color: #689d6a;">   });</span>
<span style="color: #689d6a;">   &lt;/script&gt;</span>
<span style="color: #689d6a;">   &lt;script type=\"text/javascript\"</span>
<span style="color: #689d6a;">           src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML\"&gt;&lt;/script&gt;</span>
<span style="color: #689d6a;">   "</span>
   ))
</pre>
</div>


</details>
</div>
</div>
<div id="outline-container-Lisp-Header-Elements" class="outline-3">
<h3 id="Lisp-Header-Elements"><span class="section-number-3">1.3.</span> <a href="#Lisp-Header-Elements">Lisp Header Elements</a></h3>
<div class="outline-text-3" id="text-Lisp-Header-Elements">
<p>
Some Lisp code is required to string everything together.
</p>
<ul class="org-ul">
<li>Lisp fragments are tangled to <a href="https://alhassy.com/AlBasmala.el">AlBasmala.el</a>.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-Seamlessly-Previewing-Articles-within-Emacs" class="outline-2">
<h2 id="Seamlessly-Previewing-Articles-within-Emacs"><span class="section-number-2">2.</span> <a href="#orgee9fb08"><i>Seamlessly</i> Previewing Articles <i>within</i> Emacs 😲</a></h2>
<div class="outline-text-2" id="text-Seamlessly-Previewing-Articles-within-Emacs">
<p>
The following makes it so that my blog style is appended to my org files.
</p>

<p>
As outlined above, I'd like to add <i>styles</i> and things, and so I'd like a nonintrusive way to preview what I write.
</p>
<ul class="org-ul">
<li>I'd like to have all of my styles <i>automatically</i> loaded in the right places.</li>
<li>Have my article image and abstract rendered.</li>
<li>See the resulting webpage in a JavaScript-supported browser <i>within</i> Emacs.</li>
<li>All of this is to happen whenever I <i>save</i>, <abbr class="tooltip" style="border: none; text-decoration: none;" title="C-x C-s ∷ save-buffer<br>Save current buffer in visited file if modified.<br>Variations are described below.<br><br>By default, makes the previous version into a backup file<br> if previously requested or if this is the first save.<br>Prefixed with one C-u, marks this version<br> to become a backup when the next save is done.<br>Prefixed with two C-u’s,<br> makes the previous version into a backup file.<br>Prefixed with three C-u’s, marks this version<br> to become a backup when the next save is done,<br> and makes the previous version into a backup file.<br><br>With a numeric prefix argument of 0, never make the previous version<br>into a backup file.<br><br>Note that the various variables that control backups, such<br>as ‘version-control’, ‘backup-enable-predicate’, ‘vc-make-backup-files’,<br>and ‘backup-inhibited’, to name just the more popular ones, still<br>control whether a backup will actually be produced, even when you<br>invoke this command prefixed with two or three C-u’s.<br><br>If a file’s name is FOO, the names of its numbered backup versions are<br> FOO.<code>i</code> for various integers i.&emsp;A non-numbered backup file is called FOO<code>.<br>Numeric backups (rather than FOO</code>) will be made if value of<br> ‘version-control’ is not the atom ‘never’ and either there are already<br> numeric versions of the file being backed up, or ‘version-control’ is<br> non-nil.<br>We don’t want excessive versions piling up, so there are variables<br> ‘kept-old-versions’, which tells Emacs how many oldest versions to keep,<br> and ‘kept-new-versions’, which tells how many newest versions to keep.<br> Defaults are 2 old versions and 2 new.<br>‘dired-kept-versions’ controls dired’s clean-directory (.) command.<br>If ‘delete-old-versions’ is nil, system will query user<br> before trimming versions.&emsp;Otherwise it does it silently.<br><br>If ‘vc-make-backup-files’ is nil, which is the default,<br> no backup files are made for files managed by version control.<br> (This is because the version control system itself records previous versions.)<br><br>See the subroutine ‘basic-save-buffer’ for more information.<br><br>(fn &optional ARG)"><kbd style="border-color: red">C-x C-s</kbd></abbr>.</li>
</ul>

<p>
We accomplish these goals in stages.
</p>
</div>
<div id="outline-container-HTML-Postamble" class="outline-3">
<h3 id="HTML-Postamble"><span class="section-number-3">2.1.</span> <a href="#HTML-Postamble">Using My Blog Styles Anywhere: <abbr class="tooltip" title="Provide the styles for “www.alhassy.com”’s “header” and “footer”.<br><br>The use of “blog:footer” aims to provide a clickable list of tags, produce an HTMLized version of the Org source,<br>and provides a Disqus comments sections. For details, consult the ‘org-static-blog-post-postamble’ function.<br><br>Finally, I want to avoid any ‘@@backend:...@@’ from appearing in the browser frame’s title.<br>We accomplish this with the help of some handy-dandy JavaScript: Just use “blog:sanitise-title”.<br>">org-link/blog</abbr></a></h3>
<div class="outline-text-3" id="text-HTML-Postamble">
<p>
In any Org-mode file &#x2014;including random ones that are not even for my blog&#x2014; I'll use the Org links <code>blog:header</code> and
<code>blog:footer</code> to obtain the nice styling of my blog.
</p>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Definition of “blog:𝒳𝒴𝒵” link
                      </font>
                    </strong>
                  </summary>
<p>
This is a minor alteration from the examples within the docstring of <abbr class="tooltip" title="Make a new Org-link NAME that exports using form BODY.<br><br>Since Org links are essentially string-valued functions,<br>a function ‘org-link/NAME’ is created.<br><br>DOCSTRING is optional; it is visible with<br>&emsp; (documentation ’org-link/NAME)<br><br>BODY is a string-valued expression, that may make use of the names<br>o-label, o-description, o-backend. The final one refers to the export<br>backend, such as ’html or ’latex. The first two are obtained from uses:<br><br>&emsp; Y (name:o-label][o-description]]<br><br>In particular, the use case “name:o-label” means that o-description is nil.<br><br><hr><br><br>Example use:<br><br>&emsp; ;; In a Lisp buffer, press “C-x C-e” to load this definition<br>&emsp; (org-deflink shout (upcase (or o-description o-label)))<br><br>&emsp; ;; In an Org-buffer, press “C-c C-e h o” to see how this exports<br>&emsp; <shout: hello world!><br><br>&emsp; ;; Or using the bracket format<br>&emsp; [[shout:][hello world!]]<br>&emsp; [[shout: hello world!]]<br><br>&emsp; ;; or using the plain format<br>&emsp; shout:hello_world<br><br>Here is a more complex, involved, example that makes use of<br>‘:let’ for local declarations. For instance, “define:hello”<br>renders as the word “hello” with a tooltip defining the word; the<br>definition is obtained from the command line tool ‘wn’.<br><br>&emsp;(org-deflink define<br>&emsp;&emsp;''Define the given word using WordNet, along with synonyms and coordinate terms.''<br>&emsp;&emsp;[:let (definition (shell-command-to-string (format ''wn %s -over -synsn -coorn'' o-label)))<br>&emsp;&emsp; :help-echo definition]<br>&emsp;&emsp;(--> definition<br>&emsp;&emsp;&emsp;(s-replace-regexp ''\\\'''' ''’’'' it) ;; The presence of ‘\''’ in tooltips breaks things, so omit them.<br>&emsp;&emsp;&emsp;(s-replace-regexp ''\n'' ''<br>'' it)<br>&emsp;&emsp;&emsp;(format ''<abbr class=\''tooltip\'' title=\''%s\''>%s</abbr>'' it o-label)))<br><br>For HTML tooltips, see ‘org-ospe-html-export-preserving-whitespace’.<br><br>More generally, org-special-block-extra’s “doc” link type<br>supports, in order of precedence: User definitions, Emacs Lisp<br>documentation of functions & variables, and definitions of<br>English words. For example, “doc:existential_angst” for an entry<br>‘existential_angst’ whose associated documentation-glossary is<br>user-defined in a ‘#+documentation’ Org-block, or<br>“doc:thread-first” for the Emacs Lisp documentation of the<br>function ‘thread-first’, or “doc:user-mail-address” for the Emacs<br>Lisp documentation of the variable ‘user-mail-address’, or<br>“doc:hello” for the definition of the English word ‘hello’.<br><br>DISPLAY is a vector consisting of key-value pairs that affects how the link<br>is displayed in Emacs Org buffers. The keys are as follows.<br><br>+ :help-echo is a string-valued expression of the tooltip that should accompany<br>&emsp;the new link in Org buffers. It has access to o-format being one of ‘plain’,<br>&emsp;‘angle’, ‘bracket’ which indicates the format of the link, as shown above.<br>&emsp;It also has access to o-label and o-description.<br><br>&emsp;By default, the tooltip is the link name followed by the documentation<br>&emsp;of the link, and, finally, the HTML export of the link.<br>&emsp;That way, upon hover, users can visually see the link contents,<br>&emsp;know what/how the link exports, and actually see the HTML export.<br><br>&emsp;That is to say, for the ‘shout’ example aboce, the default display is essentially:<br>&emsp;[:help-echo (org-link/shout o-label o-description ’html)]<br><br>&emsp;You may want to add the following to your Emacs init file:<br><br>&emsp;&emsp;;; Nearly instantaneous display of tooltips.<br>&emsp;&emsp;(setq tooltip-delay 0)<br>&emsp;&emsp;;; Give user 30 seconds before tooltip automatically disappears.<br>&emsp;&emsp;(setq tooltip-hide-delay 300)<br><br>+ :face specifies how should these links be displayed within Emacs.<br>&emsp; It is a list-valued expression.<br>&emsp; As usual, it may make use of O-LABEL (but O-DESCRIPTION has value nil).<br>&emsp; Example:<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; :face ’(:underline ''green'')<br><br>&emsp; See https://www.gnu.org/software/emacs/manual/html_node/elisp/Face-Attributes.html<br><br>+ [:display full] if you do not want bracket links to be<br>&emsp;folded away in Org buffers; i.e., “[[X)” does not render as just “Y”.<br><br>+ :follow is a form that is executed when you click on such links; e.g., to open<br>&emsp; another buffer, browser, or other action. It makes use of (an implicit argument) ‘o-label’.<br>&emsp; Be aware that ‘o-label’ is a string that may contain spaces; e.g., when the action is to open<br>&emsp; a URL in a browser.<br><br>&emsp; If you are in need of providing similar, related, actions on a single link<br>&emsp; then your :follow can condition on the current prefix argument via ‘o-prefix’<br>&emsp; (which is essentially ‘current-prefix-arg’).<br>&emsp; For instance, a user presses “C-u RET” on your link to do one thing<br>&emsp; but “C-u 72 RET” to do another action.<br><br>+ :keymap is an alternating list of keys and actions to be<br>&emsp;performed when those keys are pressed while point is on the link.<br>&emsp;For example:<br>&emsp;&emsp;&emsp;[:keymap (C-h (message-box ''hola''))]<br><br>&emsp;By default, C-n and C-p are for moving to next and previous occruances of the same link type.<br><br>+ :let is a list of alternating variable symbol name and value, which are then used to form<br>&emsp;a concrete ‘let*’ clause. This is useful for introducing local variables for use in the DISPLAY<br>&emsp;as well as in the CONTENTS. Such local declarations may make use of O-LABEL and O-DESCRIPTION, as usual.<br><br>(fn NAME &optional DOCSTRING DISPLAY &rest BODY)">org-deflink</abbr>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">org-deflink</span> blog
  <span style="color: #689d6a;">"Provide the styles for &#8220;www.alhassy.com&#8221;'s &#8220;header&#8221; and &#8220;footer&#8221;.</span>

<span style="color: #689d6a;">The use of &#8220;blog:footer&#8221; aims to provide a clickable list of tags, produce an HTMLized version of the Org source,</span>
<span style="color: #689d6a;">and provides a Disqus comments sections. For details, consult the `</span><span style="color: #076678; font-weight: bold;">org-static-blog-post-postamble</span><span style="color: #689d6a;">' function.</span>

<span style="color: #689d6a;">Finally, I want to avoid any `</span><span style="color: #076678; font-weight: bold;">@@backend</span><span style="color: #076678; font-weight: bold;">:...@@</span><span style="color: #689d6a;">' from appearing in the browser frame's title.</span>
<span style="color: #689d6a;">We accomplish this with the help of some handy-dandy JavaScript: Just use &#8220;blog:sanitise-title&#8221;.</span>
<span style="color: #689d6a;">"</span>
      (<span style="color: #98971a; font-weight: bold;">pcase</span> o-label
        (<span style="color: #689d6a;">"header"</span> (concat
                   org-static-blog-page-preamble
                   org-static-blog-page-header
                   <span style="color: #689d6a;">"&lt;link href=\"https://alhassy.github.io/org-notes-style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span>
                   <span style="color: #689d6a;">"&lt;link href=\"https://alhassy.github.io/floating-toc.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span>
                   <span style="color: #689d6a;">"&lt;link href=\"https://alhassy.github.io/blog-banner.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;"</span>
                   <span style="color: #a89984;">;; </span><span style="color: #a89984;">The use of the &#8220;post-title&#8221; class is so that the org-static-blog-assemble-rss method can work as intended.</span>
                   (<span style="color: #98971a; font-weight: bold;">thread-last</span> (org-static-blog-get-title (buffer-file-name))
                                (s-replace-regexp <span style="color: #689d6a;">"</span><span style="color: #af3a03; font-weight: bold;">@@html</span><span style="color: #689d6a;">:"</span> <span style="color: #689d6a;">""</span>)
                                (s-replace-regexp <span style="color: #689d6a;">"@@"</span> <span style="color: #689d6a;">""</span>)
                                (format <span style="color: #689d6a;">"&lt;br&gt;&lt;center&gt;&lt;h1 class=\"post-title\"&gt;%s&lt;/h1&gt;&lt;/center&gt;"</span>))))
        (<span style="color: #689d6a;">"footer"</span> (org-static-blog-post-postamble (buffer-file-name)))
        (<span style="color: #689d6a;">"sanitise-title"</span> <span style="color: #689d6a;">"&lt;script&gt; window.parent.document.title =  window.parent.document.title.replace(/@@.*@@/, \"\") &lt;/script&gt;"</span>)
        (_ <span style="color: #689d6a;">""</span>)))
</pre>
</div>

<p>
See also: <a href="http://alhassy.com/org-special-block-extras/#Links">How do I make a new Org link type?</a>
</p>


</details>
</div>
</div>

<div id="outline-container-A-function-to-insert-doc-org-link-blog-into-a-buffer" class="outline-3">
<h3 id="A-function-to-insert-doc-org-link-blog-into-a-buffer"><span class="section-number-3">2.2.</span> <a href="#A-function-to-insert-doc-org-link-blog-into-a-buffer">A function to insert <abbr class="tooltip" title="Provide the styles for “www.alhassy.com”’s “header” and “footer”.<br><br>The use of “blog:footer” aims to provide a clickable list of tags, produce an HTMLized version of the Org source,<br>and provides a Disqus comments sections. For details, consult the ‘org-static-blog-post-postamble’ function.<br><br>Finally, I want to avoid any ‘@@backend:...@@’ from appearing in the browser frame’s title.<br>We accomplish this with the help of some handy-dandy JavaScript: Just use “blog:sanitise-title”.<br>">org-link/blog</abbr> into a buffer</a></h3>
<div class="outline-text-3" id="text-A-function-to-insert-doc-org-link-blog-into-a-buffer">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/style-setup</span> (_backend)
  <span style="color: #689d6a;">"Insert blog header (fancy title), tags, blog image (before &#8220;* Abstract&#8221;), and footer (links to tags).</span>

<span style="color: #689d6a;">There are default options: TOC is at 2 levels, no classic Org HTML postamble nor drawers are shown.</span>
<span style="color: #689d6a;">Notice that if you explicitly provide options to change the toc, or show drawers, etc;</span>
<span style="color: #689d6a;">then your options will be honoured. (Since they will technically come /after/ the default options,</span>
<span style="color: #689d6a;">which I place below at the top of the page.)</span>
<span style="color: #689d6a;">"</span>
    (goto-char (point-min))
    (insert <span style="color: #689d6a;">"#+options: toc:2 html-postamble:nil d:nil"</span>
            <span style="color: #689d6a;">"\n blog:header blog:sanitise-title \n"</span>
            <span style="color: #689d6a;">"\n* Tags, then Image :ignore:"</span>
            <span style="color: #689d6a;">"\n#+html: "</span>
            <span style="color: #689d6a;">"&lt;center&gt;"</span>
            (blog/tags-of-file (buffer-file-name))
            <span style="color: #689d6a;">"&lt;/center&gt;"</span>
            <span style="color: #689d6a;">"\n#+html: "</span>
            (<span style="color: #98971a; font-weight: bold;">-let</span> [art (buffer-file-name)]
              <span style="color: #a89984;">;; </span><span style="color: #a89984;">Need this conditional since AlBasmala lives in ~/blog whereas usually articles live in ~/blog/posts.</span>
              <span style="color: #a89984;">;; </span><span style="color: #dc752f; font-weight: bold;">TODO</span><span style="color: #a89984;">: Consider just making AlBasmala live in ~/blog/posts, I don't think there's any real reason for breaking consistency.</span>
              (<span style="color: #98971a; font-weight: bold;">thread-last</span> (<span style="color: #98971a; font-weight: bold;">if</span> (equal (f-base art) <span style="color: #689d6a;">"AlBasmala"</span>) <span style="color: #689d6a;">"./images/"</span> <span style="color: #689d6a;">"../images/"</span>)
                           (my/org-static-blog-assemble-image art)
                           s-collapse-whitespace))
            <span style="color: #689d6a;">"\n"</span>)

    <span style="color: #a89984;">;; </span><span style="color: #a89984;">It seems I have essentially 3 different ways to handle things: Preview, Publish, Index. Consider brining those closer</span>
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">together. If I decided to switch to the org-static-blog-publish-file approach, then I would need to</span>
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">explicitly write #+begin_abstract...#+end_abstract, due to how I've defined</span>
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">org-static-blog-post-preamble. (See also org-static-blog-assemble-multipost-page for how I handle the abstract there.)</span>
    <span style="color: #a89984;">;;</span>
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">Wrap contents of &#8220;* Abstract&#8221; section in the &#8220;abstract&#8221; Org-special-block</span>
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">(In case we are narrowed, we only act when we can find the Abstract.)</span>

    (<span style="color: #98971a; font-weight: bold;">when</span> (re-search-forward <span style="color: #689d6a;">"^</span><span style="color: #af3a03; font-weight: bold;">\</span><span style="color: #689d6a;">* Abstract"</span> nil t)
      (beginning-of-line)
      (<span style="color: #98971a; font-weight: bold;">-let</span> [start (point)]
        (org-narrow-to-subtree)
        (org-show-entry)
        (re-search-forward <span style="color: #689d6a;">"^ * :END:"</span> nil t) <span style="color: #a89984;">;; </span><span style="color: #a89984;">Ignore :PROPERTIES: drawer, if any.</span>
        (forward-line)
        (insert <span style="color: #689d6a;">"\n#+begin_abstract\n"</span>)
        (call-interactively #'org-forward-heading-same-level)
        <span style="color: #a89984;">;; </span><span style="color: #a89984;">In case there is no next section, just go to end of file.</span>
        (<span style="color: #98971a; font-weight: bold;">when</span> (equal start (point)) (goto-char (point-max)))
        (insert <span style="color: #689d6a;">"\n#+end_abstract\n"</span>)
        (widen)))

    (goto-char (point-max))
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">The Org file's title is already shown via blog:header, above, so we disable it in the preview.</span>
    (insert (format <span style="color: #689d6a;">"\n* footer :ignore: \n blog:footer \n #+options: title:nil \n"</span>)))
</pre>
</div>

<p>
Note: <abbr class="tooltip" title="Assemble the value of ‘#+fileimage: image width height border?’ as an HTML form.<br><br>By default, the image should be located in the top-level ‘images/’ directory.<br>If the image is located elsewhere, or is a URL, is dictated by the presence of a ‘<em>’<br>in the image path.<br><br>Here are 4 example uses:<br><br>#+fileimage: emacs-birthday-present.png<br>#+fileimage: ..</em>images/emacs-birthday-present.png<br>#+fileimage: https://upload.wikimedia.org/wikipedia/en/6/64/Dora_and_Boots.jpg 350 300<br>#+fileimage: https://unsplash.com/photos/Vc2dD4l57og<br><br>+ Notice that the second indicates explicit width and height.<br>+ (To make the first approach work with local previews,<br>&emsp; we need the variable EXPLICIT-IMAGE-PATH-PREFIX which is used for local previews in ‘my/blog/style-setup’. This requires a slash at the end.)<br>+ The unsplash approach is specific: It shows the <strong>main</strong> image in the provided URL, and links to the provided URL.<br>">my/org-static-blog-assemble-image</abbr> is defined later on in this article.
</p>
</div>
</div>
<div id="outline-container-org57be5b7" class="outline-3">
<h3 id="org57be5b7"><span class="section-number-3">2.3.</span> <a href="#org57be5b7">Inserting <abbr class="tooltip" title="Provide the styles for “www.alhassy.com”’s “header” and “footer”.<br><br>The use of “blog:footer” aims to provide a clickable list of tags, produce an HTMLized version of the Org source,<br>and provides a Disqus comments sections. For details, consult the ‘org-static-blog-post-postamble’ function.<br><br>Finally, I want to avoid any ‘@@backend:...@@’ from appearing in the browser frame’s title.<br>We accomplish this with the help of some handy-dandy JavaScript: Just use “blog:sanitise-title”.<br>">org-link/blog</abbr> <i>seamlessly</i> via the export process; <i>then</i> preview with every save</a></h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">cl-defun</span> <span style="color: #076678;">blog/preview</span> ()
  <span style="color: #689d6a;">"Enable preview-on-save, and add blog/style-setup from Org's export hook."</span>
  (<span style="color: #98971a; font-weight: bold;">interactive</span>)
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Let's ensure we have no xwidget buffer lying around, otherwise Emacs might hang.</span>
  (<span style="color: #98971a; font-weight: bold;">-let</span> [kill-buffer-query-functions nil]
    (mapcar #'kill-buffer (<span style="color: #98971a; font-weight: bold;">--filter</span> (equal 'xwidget-webkit-mode (buffer-local-value 'major-mode it)) (buffer-list))))
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Inserting doc:org-link/blog /seamlessly/ via the export process</span>
  (add-hook 'org-export-before-processing-hook  #'blog/style-setup)
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Preview with every save</span>
  (org-preview-html-mode))

(<span style="color: #98971a; font-weight: bold;">cl-defun</span> <span style="color: #076678;">blog/preview/disable</span> ()
  <span style="color: #689d6a;">"Disable preview-on-save, and remove blog/style-setup from Org's export hook."</span>
  (<span style="color: #98971a; font-weight: bold;">interactive</span>)
  (remove-hook 'org-export-before-processing-hook #'blog/style-setup)
  (org-preview-html-mode -1))
</pre>
</div>

<p>
Upon a save, <abbr class="tooltip" style="border: none; text-decoration: none;" title="C-x C-s ∷ save-buffer<br>Save current buffer in visited file if modified.<br>Variations are described below.<br><br>By default, makes the previous version into a backup file<br> if previously requested or if this is the first save.<br>Prefixed with one C-u, marks this version<br> to become a backup when the next save is done.<br>Prefixed with two C-u’s,<br> makes the previous version into a backup file.<br>Prefixed with three C-u’s, marks this version<br> to become a backup when the next save is done,<br> and makes the previous version into a backup file.<br><br>With a numeric prefix argument of 0, never make the previous version<br>into a backup file.<br><br>Note that the various variables that control backups, such<br>as ‘version-control’, ‘backup-enable-predicate’, ‘vc-make-backup-files’,<br>and ‘backup-inhibited’, to name just the more popular ones, still<br>control whether a backup will actually be produced, even when you<br>invoke this command prefixed with two or three C-u’s.<br><br>If a file’s name is FOO, the names of its numbered backup versions are<br> FOO.<code>i</code> for various integers i.&emsp;A non-numbered backup file is called FOO<code>.<br>Numeric backups (rather than FOO</code>) will be made if value of<br> ‘version-control’ is not the atom ‘never’ and either there are already<br> numeric versions of the file being backed up, or ‘version-control’ is<br> non-nil.<br>We don’t want excessive versions piling up, so there are variables<br> ‘kept-old-versions’, which tells Emacs how many oldest versions to keep,<br> and ‘kept-new-versions’, which tells how many newest versions to keep.<br> Defaults are 2 old versions and 2 new.<br>‘dired-kept-versions’ controls dired’s clean-directory (.) command.<br>If ‘delete-old-versions’ is nil, system will query user<br> before trimming versions.&emsp;Otherwise it does it silently.<br><br>If ‘vc-make-backup-files’ is nil, which is the default,<br> no backup files are made for files managed by version control.<br> (This is because the version control system itself records previous versions.)<br><br>See the subroutine ‘basic-save-buffer’ for more information.<br><br>(fn &optional ARG)"><kbd style="border-color: red">C-x C-s</kbd></abbr>, a new HTML file is created &#x2014;bearing the same name as the Org file. It seems an <i>incremental</i>
export is performed and so this is rather fast &#x2014;at least much faster than manually invoking <kbd style="">C-c C-e h o</kbd>.
</p>
</div>
</div>

<div id="outline-container-orgb4fdc6b" class="outline-3">
<h3 id="orgb4fdc6b"><span class="section-number-3">2.4.</span> <a href="#orgb4fdc6b">Abstract Special Block</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="Relocate_near_blog_setup">Relocate_near_blog_setup</span></span></h3>
<div class="outline-text-3" id="text-2-4">
<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="orange">
                         The above “Abstract” is an Org-mode Special Block
                      </font>
                    </strong>
                  </summary>
<p>
Below is an alteration from the examples of the docstring of <abbr class="tooltip" title="Declare a new special block, and link, in the style of DEFUN.<br><br>A full featured example is at the end of this documentation string.<br><br>This is an anaphoric macro that provides export support for<br>special blocks <strong>and</strong> links named NAME. Just as an Org-mode<br>src-block consumes as main argument the language for the src<br>block, our special blocks too consume a MAIN-ARG; it may be a<br>symbol or a cons-list consisting of a symbolic name (with which<br>to refer to the main argument in the definition of the block)<br>followed by a default value, then, optionally, any information<br>for a one-time setup of the associated link type.<br><br>The main arg may be a sequence of symbols separated by spaces,<br>and a few punctuation with the exception of comma ‘,’ since it is<br>a special Lisp operator. In doubt, enclose the main arg in<br>quotes.<br><br>Then, just as Org-mode src blocks consume key-value pairs, our<br>special blocks consume a number of KWDS, which is a list of the<br>form (key₀ value₀ … keyₙ valueₙ).<br><br>After that is an optional DOCSTRING, a familar feature of DEFUN.<br>The docstring is displayed as part of the tooltip for the<br>produced link type.<br><br>Finally, the BODY is a (sequence of) Lisp forms ---no progn<br>needed--- that may refer to the names BACKEND and CONTENTS which<br>refer to the current export backend and the contents of the<br>special block ---or the description clause of a link.<br><br>CONTENTS refers to an Org-mode parsed string; i.e., Org-markup is<br>acknowledged.<br><br>In, hopefully, rare circumstances, one may refer to RAW-CONTENTS<br>to look at the fully unparsed contents.<br><br>Finally, this macro exposes two functions:<br>+ ORG-EXPORT: Wrap the argument in an export block for the current backend.<br>+ ORG-PARSE: This should ONLY be called within an ORG-EXPORT call,<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; to escape text to Org, and out of the export block.<br><br>⇄ We use “@@html:⋯:@@” when altering CONTENTS, but otherwise use raw HTML <strong>around</strong> CONTENTS.<br>⇄ For example: (format ''<div>%s</div>'' (s-replace ''#+columnbreak:'' ''@@html:<hr>@@'' contents))<br><br><hr><br><br>TLDR for EXPERIMENTAL and DOCSTRING and BODY, the first two parts are<br>optional; they’re a symbol, a string, then the main body.&emsp;The<br>symbol, O-RESPECT-NEWLINES?, when present enables a highly<br>experimental [i.e., do <strong>not</strong> use it!] feature: No new lines for<br>blocks in HTML export.&emsp;Its need rose from developing the MARGIN<br>block type.<br><br><hr><br><br>The relationship between links and special blocks:<br><br>&emsp;[ [type:label][description]]<br>≈<br>&emsp; #+begin_type label<br>&emsp;&emsp;description<br>&emsp; #+end_type<br><br><hr><br><br>Example declaration, with all possible features shown:<br><br>&emsp; ;; We can use variable values when defining new blocks<br>&emsp; (setq angry-red ’(:foreground ''red'' :weight bold))<br><br>&emsp; (org-defblock remark<br>&emsp;&emsp; (editor ''Editor Remark'' :face angry-red) (color ''red'' signoff '''')<br>&emsp;&emsp; ''Top level (HTML & LaTeX)O-RESPECT-NEWLINES? editorial remarks; in Emacs they’re angry red.''<br>&emsp;&emsp; (format (if (equal backend ’html)<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; ''<strong style=\''color: %s;\''>⟦%s:&emsp;%s%s⟧</strong>''<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; ''{\color{%s}\bfseries %s:&emsp;%s%s}'')<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; color editor contents signoff))<br><br>&emsp; ;; I don’t want to change the definition, but I’d like to have<br>&emsp; ;; the following as personalised defaults for the “remark” block.<br>&emsp; ;; OR, I’d like to set this for links, which do not have argument options.<br>&emsp; (defblock-header-args remark :main-arg ''Jasim Jameson'' :signoff ''( Aim for success! )'')<br><br>Three example uses:<br><br>&emsp;&emsp;;; ⟨0⟩ As a special blocks with arguments given.<br>&emsp;&emsp;#+begin_remark Bobbert Barakallah :signoff ''Thank-you for pointing this out!'' :color green<br>&emsp;&emsp;I was trying to explain that <em>{large (n × (n + 1) over 2}</em> is always an integer.<br>&emsp;&emsp;#+end_remark<br><br>&emsp;&emsp;;; ⟨1⟩ As a terse link, using default values for the args.<br>&emsp;&emsp;;;&emsp;&emsp; Notice that Org-mode formatting is recoqgnised even in links.<br>&emsp;&emsp;[ [remark:Jasim Jameson][Why are you taking about “<em>mathsf{even}</em>” here?]]<br><br>&emsp;&emsp;;; ⟨2⟩ So terse that no editor name is provided.<br>&emsp;&emsp;[ [remark:][Please improve your transition sentences.]]<br><br>&emsp;&emsp;;; ⟨★⟩ Unlike 0, examples 1 and 2 will have the default SIGNOFF<br>&emsp;&emsp;;; catenated as well as the default red color.<br><br>(fn NAME MAIN-ARG KWDS &optional EXPERIMENTAL DOCSTRING &rest BODY)">org-defblock</abbr>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">org-defblock</span> abstract (main) nil
  <span style="color: #689d6a;">"Render a block in a slightly narrowed blueish box, titled \"Abstract\".</span>

<span style="color: #689d6a;">   Supported backends: HTML. "</span>
   (format (concat
            <span style="color: #689d6a;">"&lt;div class=\"abstract\" style=\"border: 1px solid black;"</span>
            <span style="color: #689d6a;">"padding: 10px; margin-top: 50px; margin-bottom: 50px;"</span>
            <span style="color: #689d6a;">"margin-right: 150px; margin-left: 80px; background-color: lightblue;\"&gt;"</span>
            <span style="color: #689d6a;">"&lt;center&gt; &lt;strong class=\"tooltip\""</span>
            <span style="color: #689d6a;">"title=\"What's the goal of this article?\"&gt; Abstract &lt;/strong&gt; &lt;/center&gt;"</span>
            <span style="color: #689d6a;">"%s &lt;/div&gt;"</span>)
           contents))
</pre>
</div>


</details>
</div>
</div>
</div>

<div id="outline-container-Floating-TOC" class="outline-2">
<h2 id="Floating-TOC"><span class="section-number-2">3.</span> <a href="#Floating-TOC">Ξ: Floating <i>Table of Contents</i></a></h2>
<div class="outline-text-2" id="text-Floating-TOC">
<p>
<a id="org9979b54"></a>
</p>

<p>
I would like to have a table of contents that floats so that it is accessible to
the reader in case they want to jump elsewhere in the document quickly
&#x2014;possibly going to the top of the document.
</p>

<p>
When we write <code>#+toc: headlines 2</code> in our Org, HTML export produces the following.
</p>
<div class="org-src-container">
<pre class="src src-html"><span class="linenr"> 1: </span>&lt;<span style="color: #076678;">div</span> <span style="color: #076678;">id</span>=<span style="color: #689d6a;">"table-of-contents"</span>&gt;
<span class="linenr"> 2: </span>  &lt;<span style="color: #076678;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">Table of Contents</span>&lt;/<span style="color: #076678;">h2</span>&gt;
<span class="linenr"> 3: </span>  &lt;<span style="color: #076678;">div</span> <span style="color: #076678;">id</span>=<span style="color: #689d6a;">"text-table-of-contents"</span>&gt;
<span class="linenr"> 4: </span>    &lt;<span style="color: #076678;">ul</span>&gt;
<span class="linenr"> 5: </span>      &lt;<span style="color: #076678;">li</span>&gt; section 1 &lt;/<span style="color: #076678;">li</span>&gt;
<span class="linenr"> 6: </span>             &#8942;
<span class="linenr"> 7: </span>      &lt;<span style="color: #076678;">li</span>&gt; section &#120003; &lt;/<span style="color: #076678;">li</span>&gt;
<span class="linenr"> 8: </span>    &lt;/<span style="color: #076678;">ul</span>&gt;
<span class="linenr"> 9: </span>  &lt;/<span style="color: #076678;">div</span>&gt;
<span class="linenr">10: </span>&lt;/<span style="color: #076678;">div</span>&gt;
</pre>
</div>
<p>
Hence, we can style the table of contents by writing rules that target those
<code>id</code>'s. We use the following rules, adapted from <a href="https://orgmode.org/worg/">the Worg community</a>.
</p>
<div class="org-src-container">
<pre class="src src-css"><span class="linenr"> 1: </span><span style="color: #a89984;">/*</span><span style="color: #a89984;">TOC inspired by https://orgmode.org/worg/</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 2: </span><span style="color: #076678;">#table-of-contents </span>{
<span class="linenr"> 3: </span>    <span style="color: #a89984;">/* </span><span style="color: #a89984;">Place the toc in the top right corner</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 4: </span>    <span style="color: #98971a; font-weight: bold;">position</span>: fixed; <span style="color: #98971a; font-weight: bold;">right</span>: 0em; <span style="color: #98971a; font-weight: bold;">top</span>: 0em;
<span class="linenr"> 5: </span>    <span style="color: #98971a; font-weight: bold;">margin-top</span>: 120px; <span style="color: #a89984;">/* </span><span style="color: #a89984;">offset from the top of the screen</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #a89984;">/* </span><span style="color: #a89984;">It shrinks and grows as necessary</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 8: </span>    <span style="color: #98971a; font-weight: bold;">padding</span>: 0em <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr"> 9: </span>    <span style="color: #98971a; font-weight: bold;">width</span>: auto <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr">10: </span>    <span style="color: #98971a; font-weight: bold;">min-width</span>: auto <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr">11: </span>
<span class="linenr">12: </span>    <span style="color: #98971a; font-weight: bold;">font-size</span>: 10pt;
<span class="linenr">13: </span>    <span style="color: #98971a; font-weight: bold;">background</span>: <span style="color: #000000; background-color: #ffffff;">white</span>;
<span class="linenr">14: </span>    <span style="color: #98971a; font-weight: bold;">line-height</span>: 12pt;
<span class="linenr">15: </span>    <span style="color: #98971a; font-weight: bold;">text-align</span>: right;
<span class="linenr">16: </span>
<span class="linenr">17: </span>    <span style="color: #98971a; font-weight: bold;">box-shadow</span>: 0 0 1em <span style="color: #ffffff; background-color: #777777;">#777777</span>;
<span class="linenr">18: </span>    <span style="color: #98971a; font-weight: bold; font-style: italic;">-webkit-box-shadow</span>: 0 0 1em <span style="color: #ffffff; background-color: #777777;">#777777</span>;
<span class="linenr">19: </span>    <span style="color: #98971a; font-weight: bold; font-style: italic;">-moz-box-shadow</span>: 0 0 1em <span style="color: #ffffff; background-color: #777777;">#777777</span>;
<span class="linenr">20: </span>    <span style="color: #98971a; font-weight: bold; font-style: italic;">-webkit-border-bottom-left-radius</span>: 5px;
<span class="linenr">21: </span>    <span style="color: #98971a; font-weight: bold; font-style: italic;">-moz-border-radius-bottomleft</span>: 5px;
<span class="linenr">22: </span>
<span class="linenr">23: </span>    <span style="color: #a89984;">/* </span><span style="color: #a89984;">Ensure doesn't flow off the screen when expanded</span><span style="color: #a89984;"> */</span>
<span class="linenr">24: </span>    <span style="color: #98971a; font-weight: bold;">max-height</span>: 80%;
<span class="linenr">25: </span>    <span style="color: #98971a; font-weight: bold;">overflow</span>: auto;}
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="color: #a89984;">/* </span><span style="color: #a89984;">How big is the text &#8220;Table of Contents&#8221; and space around it</span><span style="color: #a89984;"> */</span>
<span class="linenr">28: </span><span style="color: #076678;">#table-of-contents h2 </span>{
<span class="linenr">29: </span>    <span style="color: #98971a; font-weight: bold;">font-size</span>: 13pt;
<span class="linenr">30: </span>    <span style="color: #98971a; font-weight: bold;">max-width</span>: 9em;
<span class="linenr">31: </span>    <span style="color: #98971a; font-weight: bold;">border</span>: 0;
<span class="linenr">32: </span>    <span style="color: #98971a; font-weight: bold;">font-weight</span>: normal;
<span class="linenr">33: </span>    <span style="color: #98971a; font-weight: bold;">padding-left</span>: 0.5em;
<span class="linenr">34: </span>    <span style="color: #98971a; font-weight: bold;">padding-right</span>: 0.5em;
<span class="linenr">35: </span>    <span style="color: #98971a; font-weight: bold;">padding-top</span>: 0.05em;
<span class="linenr">36: </span>    <span style="color: #98971a; font-weight: bold;">padding-bottom</span>: 0.05em; }
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #a89984;">/* </span><span style="color: #a89984;">Intially have the TOC folded up; show it if the mouse hovers it</span><span style="color: #a89984;"> */</span>
<span class="linenr">39: </span><span style="color: #076678;">#table-of-contents #text-table-of-contents </span>{
<span class="linenr">40: </span>    <span style="color: #98971a; font-weight: bold;">display</span>: none;
<span class="linenr">41: </span>    <span style="color: #98971a; font-weight: bold;">text-align</span>: left; }
<span class="linenr">42: </span>
<span class="linenr">43: </span><span style="color: #076678;">#table-of-contents:hover #text-table-of-contents </span>{
<span class="linenr">44: </span>    <span style="color: #98971a; font-weight: bold;">display</span>: block;
<span class="linenr">45: </span>    <span style="color: #98971a; font-weight: bold;">padding</span>: 0.5em;
<span class="linenr">46: </span>    <span style="color: #98971a; font-weight: bold;">margin-top</span>: -1.5em; }
</pre>
</div>

<p style="color: black;"><span style="border-width:1px;border-style:solid;padding:5px"><strong>[Strange:</strong></span>
<p>
If I zoom in over 100% in my browser, the toc disappears until I zoom out.
</p>

<span style="border-width:1px;border-style:solid;padding:5px"><strong>]</strong></span></p>

<p>
Since the table of contents floats, the phrase <i>Table of Contents</i> is rather
‘in your face’, so let's use the more subtle Greek <a href="https://en.wikipedia.org/wiki/Xi_(letter)">letter</a> <code>Ξ</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(advice-add 'org-html--translate <span style="color: #7c6f64; font-weight: bold;">:before-until</span> 'display-toc-as-&#926;)
<span class="linenr"> 2: </span><span style="color: #a89984;">;; </span><span style="color: #a89984;">(advice-remove 'org-html--translate 'display-toc-as-&#926;)</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">display-toc-as-&#926;</span> (phrase info)
<span class="linenr"> 5: </span>  (<span style="color: #98971a; font-weight: bold;">when</span> (equal phrase <span style="color: #689d6a;">"Table of Contents"</span>)
<span class="linenr"> 6: </span>    (s-collapse-whitespace
<span class="linenr"> 7: </span>    <span style="color: #689d6a;">"&#160;&lt;a href=\"javascript:window.scrollTo(0,0)\"</span>
<span class="linenr"> 8: </span><span style="color: #689d6a;">        style=\"color: black !important; border-bottom: none !important;\"</span>
<span class="linenr"> 9: </span><span style="color: #689d6a;">        class=\"tooltip\"</span>
<span class="linenr">10: </span><span style="color: #689d6a;">        title=\"Go to the top of the page\"&gt;</span>
<span class="linenr">11: </span><span style="color: #689d6a;">      &#926;</span>
<span class="linenr">12: </span><span style="color: #689d6a;">    &lt;/a&gt;&#160;"</span>)))
</pre>
</div>

<p>
How did I get here?
</p>
<ol class="org-ol">
<li>How does Org's HTML export TOCs? ⇒ <abbr class="tooltip" title="Build a table of contents.<br>DEPTH is an integer specifying the depth of the table.&emsp;INFO is<br>a plist used as a communication channel.&emsp;Optional argument SCOPE<br>is an element defining the scope of the table.&emsp;Return the table<br>of contents as a string, or nil if it is empty.<br><br>(fn DEPTH INFO &optional SCOPE)">org-html-toc</abbr></li>
<li>Looking at its source, we see <abbr class="tooltip" title="Translate string S according to specified language.<br>INFO is a plist used as a communication channel.<br><br>This function has :before-until advice: ‘display-toc-as-Ξ’.<br><br>(fn S INFO)">org-html--translate</abbr> being
the only place mentioning the string <i>Table of Contents</i></li>
<li>Let's advise it, with <abbr class="tooltip" title="Like ‘add-function’ but for the function named SYMBOL.<br>Contrary to ‘add-function’, this will properly handle the cases where SYMBOL<br>is defined as a macro, alias, command, ...<br><br>(fn SYMBOL WHERE FUNCTION &optional PROPS)">advice-add</abbr>, to return <i>Ξ</i>
<i>only</i> on that particular input string.</li>
<li>Joy ♥‿♥</li>
</ol>
</div>
</div>

<style> center.tiny a img { height: 15px } </style>

<div id="outline-container-Ensuring-Useful-HTML-Anchors" class="outline-2">
<h2 id="Ensuring-Useful-HTML-Anchors"><span class="section-number-2">4.</span> <a href="#Ensuring-Useful-HTML-Anchors">Ensuring Useful HTML Anchors</a></h2>
<div class="outline-text-2" id="text-Ensuring-Useful-HTML-Anchors">
<p>
 <center class="tiny" style="font-size: 15px"> <i>This section has been <code>#+include</code>'d from my init.org</i>, <a href="https://alhassy.github.io/emacs.d"><img src="https://img.shields.io/badge/A_Life_Configuring-Emacs-green?logo=gnu-emacs"></a>  </center>
<a id="org6037ba9"></a>
Upon HTML export, each tree heading is assigned an ID to be used for hyperlinks.
Default IDs are something like <code>org1957a9d</code>, which does not endure the test of time:
Re-export will produce a different id. Here's a rough snippet to generate
IDs from headings, by replacing spaces with hyphens, for headings without IDs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">my/ensure-headline-ids</span> (<span style="color: #b57614;">&amp;rest</span> _)
  <span style="color: #689d6a;">"Org trees without a</span>

<span style="color: #689d6a;">All non-alphanumeric characters are cleverly replaced with &#8216;</span><span style="color: #076678; font-weight: bold;">-</span><span style="color: #689d6a;">&#8217;.</span>

<span style="color: #689d6a;">If multiple trees end-up with the same id property, issue a</span>
<span style="color: #689d6a;">message and undo any property insertion thus far.</span>

<span style="color: #689d6a;">E.g., &#8623; We'll go on a &#8704;&#8707;&#8645; adventure</span>
<span style="color: #689d6a;">   &#8614;  We'll-go-on-a-adventure</span>
<span style="color: #689d6a;">"</span>
  (<span style="color: #98971a; font-weight: bold;">interactive</span>)
  (<span style="color: #98971a; font-weight: bold;">let</span> ((ids))
    (org-map-entries
     (<span style="color: #98971a; font-weight: bold;">lambda</span> ()
       (<span style="color: #98971a; font-weight: bold;">org-with-point-at</span> (point)
         (<span style="color: #98971a; font-weight: bold;">let</span> ((id (org-entry-get nil <span style="color: #689d6a;">"CUSTOM_ID"</span>)))
           (<span style="color: #98971a; font-weight: bold;">unless</span> id
             (<span style="color: #98971a; font-weight: bold;">thread-last</span> (nth 4 (org-heading-components))
               (s-replace-regexp <span style="color: #689d6a;">"[</span><span style="color: #b57614; font-weight: bold;">^</span><span style="color: #689d6a;">[:alnum:]']"</span> <span style="color: #689d6a;">"-"</span>)
               (s-replace-regexp <span style="color: #689d6a;">"-+"</span> <span style="color: #689d6a;">"-"</span>)
               (s-chop-prefix <span style="color: #689d6a;">"-"</span>)
               (s-chop-suffix <span style="color: #689d6a;">"-"</span>)
               (<span style="color: #98971a; font-weight: bold;">setq</span> id))
             (<span style="color: #98971a; font-weight: bold;">if</span> (not (member id ids))
                 (<span style="color: #98971a; font-weight: bold;">push</span> id ids)
               (message-box <span style="color: #689d6a;">"Oh no, a repeated id!\n\n\t%s"</span> id)
               (undo)
               (<span style="color: #98971a; font-weight: bold;">setq</span> quit-flag t))
             (org-entry-put nil <span style="color: #689d6a;">"CUSTOM_ID"</span> id))))))))

<span style="color: #a89984;">;; </span><span style="color: #a89984;">Whenever html &amp; md export happens, ensure we have headline ids.</span>
(advice-add 'org-html-export-to-html   <span style="color: #7c6f64; font-weight: bold;">:before</span> 'my/ensure-headline-ids)
(advice-add 'org-md-export-to-markdown <span style="color: #7c6f64; font-weight: bold;">:before</span> 'my/ensure-headline-ids)
</pre>
</div>

<p>
One may then use <code>[[#my-custom-id]]</code> to link to the entry with <code>CUSTOM_ID</code>
property <code>my-custom-id</code>.
</p>

<p>
Interestingly, <code>org-set-property</code>, <code>C-c C-x p</code>, lets us insert a property
from a selection of available ones, then we'll be prompted for a value
for it from a list of values you've used elsewhere. This is useful for
remaining consistent for when trees share similar properties.
</p>
</div>
</div>

<div id="outline-container-Clickable-Headlines" class="outline-2">
<h2 id="Clickable-Headlines"><span class="section-number-2">5.</span> <a href="#Clickable-Headlines">Clickable Headlines</a></h2>
<div class="outline-text-2" id="text-Clickable-Headlines">
<p>
 <center class="tiny" style="font-size: 15px"> <i>This section has been <code>#+include</code>'d from my init.org</i>, <a href="https://alhassy.github.io/emacs.d"><img src="https://img.shields.io/badge/A_Life_Configuring-Emacs-green?logo=gnu-emacs"></a>  </center>
<a id="orgca27482"></a>
By default, HTML export generates ID's to headlines so they may be referenced
to, but there is no convenient way to get at them to refer to a particular
heading. The following spell fixes this issue: Headlines are now clickable,
resulting in a link to the headline itself.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a89984;">;; </span><span style="color: #a89984;">Src: https://writepermission.com/org-blogging-clickable-headlines.html</span>
(<span style="color: #98971a; font-weight: bold;">setq</span> org-html-format-headline-function
      (<span style="color: #98971a; font-weight: bold;">lambda</span> (todo todo-type priority text tags info)
        <span style="color: #689d6a;">"Format a headline with a link to itself."</span>
        (<span style="color: #98971a; font-weight: bold;">let*</span> ((headline (get-text-property 0 <span style="color: #7c6f64; font-weight: bold;">:parent</span> text))
               (id (<span style="color: #98971a; font-weight: bold;">or</span> (org-element-property <span style="color: #7c6f64; font-weight: bold;">:CUSTOM_ID</span> headline)
                       (<span style="color: #98971a; font-weight: bold;">ignore-errors</span> (org-export-get-reference headline info))
                       (org-element-property <span style="color: #7c6f64; font-weight: bold;">:ID</span> headline)))
               (link (<span style="color: #98971a; font-weight: bold;">if</span> id
                         (format <span style="color: #689d6a;">"&lt;a href=\"#%s\"&gt;%s&lt;/a&gt;"</span> id text)
                       text)))
          (org-html-format-headline-default-function todo todo-type priority link tags info))))
</pre>
</div>

<p>
<b>Warning:</b> The header cannot already be a link!  Otherwise you get cyrptic and
unhelpful error <code>(wrong-type-argument plistp :section-number)</code>; which then
pollutes the current Emacs session resulting in stange <code>nil</code> errors after <code>C-x C-s</code>,
thereby forcing a full Emacs restart.  Instead, you need at least one portion of
each heading to be not a link.
</p>

<ol class="org-ol">
<li><p>
Need to have a custom id declared.
</p>
<div class="org-src-container">
<pre class="src src-org">  :PROPERTIES:
  :CUSTOM_ID: my-header
  :END:
</pre>
</div></li>
<li>Failing headers: <code>* [[link]]</code> nor <code>* ~code~</code> nor <code>* $math$</code>.
<ul class="org-ul">
<li>Any non-link text <i>before</i> it will work:  <code>ok [[link]]</code>.
<ul class="org-ul">
<li>Using Unicode non-breaking space ‘ ’ is ok.</li>
</ul></li>
<li>Text <i>only after</i> the link is insufficient.</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-Curvy-Source-Blocks" class="outline-2">
<h2 id="Curvy-Source-Blocks"><span class="section-number-2">6.</span> <a href="#Curvy-Source-Blocks">Curvy Source Blocks &amp; Pink Inline</a></h2>
<div class="outline-text-2" id="text-Curvy-Source-Blocks">
<p>
<a id="orge184bbb"></a>
</p>

<p>
The <code>border-radius</code> property defines the radius of an
element's corners, we use it to make curvy looking source blocks.
Its behaviour <a href="https://www.w3schools.com/cssref/css3_pr_border-radius.asp">changes</a> depending on how many arguments it is given.
</p>
<ul class="org-ul">
<li>We also style the code block's label to be curvy.</li>
<li>Both <code>.src</code> and <code>pre.src:before</code> are used by Org.</li>
</ul>

<div class="org-src-container">
<pre class="src src-css"><span class="linenr"> 1: </span><span style="color: #076678;">.src </span>{
<span class="linenr"> 2: </span>  <span style="color: #98971a; font-weight: bold;">border</span>: 0px <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr"> 3: </span>  <span style="color: #a89984;">/* </span><span style="color: #a89984;">50px for top-left and bottom-right corners;</span>
<span class="linenr"> 4: </span><span style="color: #a89984;">     20px for top-right and bottom-left cornerns.</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 5: </span>  <span style="color: #98971a; font-weight: bold;">border-radius</span>: 50px 20px <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr"> 6: </span>}
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #076678;">pre.src:before </span>{
<span class="linenr"> 9: </span>    <span style="color: #a89984;">/* </span><span style="color: #a89984;">border: 0px !important;</span><span style="color: #a89984;"> */</span>
<span class="linenr">10: </span>    <span style="color: #a89984;">/* </span><span style="color: #a89984;">background-color: inherit !important;</span><span style="color: #a89984;"> */</span>
<span class="linenr">11: </span>    <span style="color: #98971a; font-weight: bold;">padding</span>: 3px <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr">12: </span>    <span style="color: #98971a; font-weight: bold;">border-radius</span>: 20px 50px <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr">13: </span>    <span style="color: #98971a; font-weight: bold;">font-weight</span>:700
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span> <span style="color: #a89984;">/* </span><span style="color: #a89984;">wrap lengthy lines for code blocks</span><span style="color: #a89984;"> */</span>
<span class="linenr">17: </span> <span style="color: #076678;">pre</span>{<span style="color: #98971a; font-weight: bold;">white-space</span>:pre-wrap}
<span class="linenr">18: </span>
<span class="linenr">19: </span> <span style="color: #a89984;">/* </span><span style="color: #a89984;">Also curvy inline code with ~ &#8943; ~ and = &#8943; =</span><span style="color: #a89984;"> */</span>
<span class="linenr">20: </span> <span style="color: #076678;">code </span>{
<span class="linenr">21: </span>     <span style="color: #a89984;">/* </span><span style="color: #a89984;">background: Cyan !important;</span><span style="color: #a89984;"> */</span>
<span class="linenr">22: </span>     <span style="color: #98971a; font-weight: bold;">background</span>: <span style="color: #000000; background-color: #ffc0cb;">pink</span> <span style="color: #7c6f64; font-weight: bold;">!important</span>;
<span class="linenr">23: </span>     <span style="color: #98971a; font-weight: bold;">border-radius</span>: 7px;
<span class="linenr">24: </span>     <span style="color: #a89984;">/* </span><span style="color: #a89984;">border: 1px solid lightgrey; background: #FFFFE9; padding: 2px</span><span style="color: #a89984;"> */</span>
<span class="linenr">25: </span> }
</pre>
</div>

<p>
Code such as <code>(= 2 (+ 1 1))</code> now sticks out with a cyan background ♥‿♥
</p>

<div class="org-src-container">
<pre class="src src-css"> <span style="color: #076678;">table </span>{
     <span style="color: #98971a; font-weight: bold;">background</span>: <span style="color: #000000; background-color: #ffc0cb;">pink</span>;
     <span style="color: #98971a; font-weight: bold;">border-radius</span>: 10px;
     <span style="color: #a89984;">/* </span><span style="color: #a89984;">width:90%</span><span style="color: #a89984;"> */</span>

     <span style="color: #98971a; font-weight: bold;">border-bottom</span>: hidden;
     <span style="color: #98971a; font-weight: bold;">border-top</span>: hidden;

     <span style="color: #98971a; font-weight: bold;">display</span>: table <span style="color: #7c6f64; font-weight: bold;">!important</span>;

     <span style="color: #a89984;">/* </span><span style="color: #a89984;">Put table in the center of the page, horizontally.</span><span style="color: #a89984;"> */</span>
     <span style="color: #98971a; font-weight: bold;">margin-left</span>:auto <span style="color: #7c6f64; font-weight: bold;">!important</span>;<span style="color: #98971a; font-weight: bold;">margin-right</span>:auto <span style="color: #7c6f64; font-weight: bold;">!important</span>;

     <span style="color: #98971a; font-weight: bold;">font-family</span>:<span style="color: #689d6a;">"Courier New"</span>;
     <span style="color: #98971a; font-weight: bold;">font-size</span>:90%;
 }

 <span style="color: #a89984;">/* </span><span style="color: #a89984;">Styling for &#8216;t&#8217;able &#8216;d&#8217;ata and &#8216;h&#8217;eader elements</span><span style="color: #a89984;"> */</span>
 <span style="color: #076678;">th, td </span>{
     <span style="color: #98971a; font-weight: bold;">border</span>: 0px solid <span style="color: #ffffff; background-color: #ff0000;">red</span>;
 }
</pre>
</div>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-bottom"><span class="table-number">Table 1:</span> Example table</caption>

<colgroup>
<col  class="org-center" />

<col  class="org-center" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-center">Prime</th>
<th scope="col" class="org-center">2<sup>Prime</sup></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-center">1</td>
<td class="org-center">2</td>
</tr>

<tr>
<td class="org-center">2</td>
<td class="org-center">4</td>
</tr>

<tr>
<td class="org-center">3</td>
<td class="org-center">8</td>
</tr>

<tr>
<td class="org-center">5</td>
<td class="org-center">32</td>
</tr>

<tr>
<td class="org-center">7</td>
<td class="org-center">128</td>
</tr>

<tr>
<td class="org-center">11</td>
<td class="org-center">2048</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #a89984;">;; </span><span style="color: #a89984;">Table captions should be below the tables</span>
(<span style="color: #98971a; font-weight: bold;">setq</span> org-html-table-caption-above nil
      org-export-latex-table-caption-above nil)
</pre>
</div>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Let's show folded, details, regions with a nice greenish colour
                      </font>
                    </strong>
                  </summary>
<p>
This is part of <code>org-special-block-extras</code>, and it's something like this:
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #076678;">details </span>{
  <span style="color: #98971a; font-weight: bold;">padding</span>: 1em;
  <span style="color: #98971a; font-weight: bold;">background-color</span>: <span style="color: #000000; background-color: #e5f5e5;">#e5f5e5</span>;
  <span style="color: #a89984;">/* </span><span style="color: #a89984;">background-color: pink;</span><span style="color: #a89984;"> */</span>
  <span style="color: #98971a; font-weight: bold;">border-radius</span>: 15px;
  <span style="color: #98971a; font-weight: bold;">color</span>: <span style="color: #ffffff; background-color: #0c593b;">hsl(157 75% 20%)</span>;
  <span style="color: #98971a; font-weight: bold;">font-size</span>: 0.9em;
  <span style="color: #98971a; font-weight: bold;">box-shadow</span>: 0.05em 0.1em 5px 0.01em  <span style="color: #ffffff; background-color: #000000;">#00000057</span>;
}
</pre>
</div>



</details>
</div>
</div>

<div id="outline-container-Blog-Banner" class="outline-2">
<h2 id="Blog-Banner"><span class="section-number-2">7.</span> <a href="#Blog-Banner">Blog Banner and Dynamic Code Highlighting</a></h2>
<div class="outline-text-2" id="text-Blog-Banner">
<p>
<a id="org6ce2c0a"></a>
</p>

<p>
I want to have a nice banner at the top of every page, which should link
to useful parts of my blog.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-page-preamble
<span class="linenr"> 2: </span><span style="color: #689d6a;">"&lt;div class=\"header\"&gt;</span>
<span class="linenr"> 3: </span><span style="color: #689d6a;">  &lt;a href=\"https://alhassy.github.io/\" class=\"logo\"&gt;Life &amp; Computing Science&lt;/a&gt;</span>
<span class="linenr"> 4: </span><span style="color: #689d6a;">  &lt;br&gt;</span>
<span class="linenr"> 5: </span><span style="color: #689d6a;">    &lt;a href=\"https://alhassy.github.io/AlBasmala\"&gt;AlBasmala&lt;/a&gt;</span>
<span class="linenr"> 6: </span><span style="color: #689d6a;">    &lt;a href=\"https://alhassy.github.io/archive\"&gt;Archive&lt;/a&gt;</span>
<span class="linenr"> 7: </span><span style="color: #689d6a;">    &lt;a href=\"https://alhassy.github.io/tags\"&gt;Tags&lt;/a&gt;</span>
<span class="linenr"> 8: </span><span style="color: #689d6a;">    &lt;a href=\"https://alhassy.github.io/rss.xml\"&gt;RSS&lt;/a&gt;</span>
<span class="linenr"> 9: </span><span style="color: #689d6a;">    &lt;a href=\"https://alhassy.github.io/about\"&gt;About&lt;/a&gt;</span>
<span class="linenr">10: </span><span style="color: #689d6a;">&lt;/div&gt;"</span>)
</pre>
</div>

<p>
I want to style it as follows:
</p>

<ul class="org-ul">
<li>Line <a href="#coderef-headerHeader" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-headerHeader');" onmouseout="CodeHighlightOff(this, 'coderef-headerHeader');">1</a>: The banner is in a box at the top with some shadowing and
centerd text using the <code>fantasy</code> font</li>
<li>Line <a href="#coderef-headerLogo" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-headerLogo');" onmouseout="CodeHighlightOff(this, 'coderef-headerLogo');">13</a>: The blog's title is large and bold</li>
<li>Line <a href="#coderef-headerAnchor" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-headerAnchor');" onmouseout="CodeHighlightOff(this, 'coderef-headerAnchor');">18</a>: All links in the banner are black</li>
<li>Line <a href="#coderef-headerHover" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-headerHover');" onmouseout="CodeHighlightOff(this, 'coderef-headerHover');">25</a>: When you hover over a link, it becomes blue</li>
</ul>

<div class="org-src-container">
<pre class="src src-css"><span id="coderef-headerHeader" class="coderef-off"><span class="linenr"> 1: </span><span style="color: #076678;">.header </span>{</span>
<span class="linenr"> 2: </span>  <span style="color: #a89984;">/* </span><span style="color: #a89984;">Try to load &#8216;fantasy&#8217; if possible, else try to load the others.</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 3: </span>  <span style="color: #98971a; font-weight: bold;">font-family</span>: fantasy, monospace, Times;
<span class="linenr"> 4: </span>  <span style="color: #98971a; font-weight: bold;">text-align</span>: center;
<span class="linenr"> 5: </span>  <span style="color: #98971a; font-weight: bold;">overflow</span>: hidden;
<span class="linenr"> 6: </span>  <span style="color: #a89984;">/* </span><span style="color: #a89984;">background-color: #f1f1f1 !important;</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 7: </span>  <span style="color: #a89984;">/* </span><span style="color: #a89984;">background: #4183c4 !important;</span><span style="color: #a89984;"> */</span>
<span class="linenr"> 8: </span>  <span style="color: #98971a; font-weight: bold;">padding-top</span>: 10px;
<span class="linenr"> 9: </span>  <span style="color: #98971a; font-weight: bold;">padding-bottom</span>: 10px;
<span class="linenr">10: </span>  <span style="color: #98971a; font-weight: bold;">box-shadow</span>: 0 2px 10px 2px <span style="color: #ffffff; background-color: #000000;">rgba(0, 0, 0, 0.2)</span>;
<span class="linenr">11: </span>}
<span class="linenr">12: </span>
<span id="coderef-headerLogo" class="coderef-off"><span class="linenr">13: </span><span style="color: #076678;">.header a.logo </span>{</span>
<span class="linenr">14: </span>  <span style="color: #98971a; font-weight: bold;">font-size</span>: 50px;
<span class="linenr">15: </span>  <span style="color: #98971a; font-weight: bold;">font-weight</span>: bold;
<span class="linenr">16: </span>}
<span class="linenr">17: </span>
<span id="coderef-headerAnchor" class="coderef-off"><span class="linenr">18: </span><span style="color: #076678;">.header a </span>{</span>
<span class="linenr">19: </span>  <span style="color: #98971a; font-weight: bold;">color</span>: <span style="color: #ffffff; background-color: #000000;">black</span>;
<span class="linenr">20: </span>  <span style="color: #98971a; font-weight: bold;">padding</span>: 12px;
<span class="linenr">21: </span>  <span style="color: #98971a; font-weight: bold;">text-decoration</span>: none;
<span class="linenr">22: </span>  <span style="color: #98971a; font-weight: bold;">font-size</span>: 18px;
<span class="linenr">23: </span>}
<span class="linenr">24: </span>
<span id="coderef-headerHover" class="coderef-off"><span class="linenr">25: </span><span style="color: #076678;">.header a:hover </span>{</span>
<span class="linenr">26: </span>  <span style="color: #98971a; font-weight: bold;">background-color</span>: <span style="color: #000000; background-color: #ddd;">#ddd</span>;
<span class="linenr">27: </span>  <span style="color: #98971a; font-weight: bold;">background-color</span>: <span style="color: #000000; background-color: #fff;">#fff</span>;
<span class="linenr">28: </span>  <span style="color: #98971a; font-weight: bold;">color</span>: <span style="color: #ffffff; background-color: #4183c4;">#4183c4</span>;
<span class="linenr">29: </span>}
</pre>
</div>

<p>
Notice that as you hover over the references, such as <a href="#coderef-headerLogo" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-headerLogo');" onmouseout="CodeHighlightOff(this, 'coderef-headerLogo');">this</a>, <b>the corresponding
line of code is highlighted!</b> Within a <code>src</code> block, one uses the switches <code>-n -r</code>
to enable references via line numbers, then declares <code>(ref:name)</code> on line
and refers to it by <code>[[(name)][description]]</code>. Org-mode by default styles
such highlighting.
</p>
<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Dynamic Code Highlighting
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span><span style="color: #689d6a;">"&lt;script type=\"text/javascript\"&gt;</span>
<span class="linenr"> 2: </span><span style="color: #689d6a;">/*</span>
<span class="linenr"> 3: </span><span style="color: #689d6a;">@licstart  The following is the entire license notice for the</span>
<span class="linenr"> 4: </span><span style="color: #689d6a;">JavaScript code in this tag.</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #689d6a;">Copyright (C) 2012-2020 Free Software Foundation, Inc.</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #689d6a;">The JavaScript code in this tag is free software: you can</span>
<span class="linenr"> 9: </span><span style="color: #689d6a;">redistribute it and/or modify it under the terms of the GNU</span>
<span class="linenr">10: </span><span style="color: #689d6a;">General Public License (GNU GPL) as published by the Free Software</span>
<span class="linenr">11: </span><span style="color: #689d6a;">Foundation, either version 3 of the License, or (at your option)</span>
<span class="linenr">12: </span><span style="color: #689d6a;">any later version.  The code is distributed WITHOUT ANY WARRANTY;</span>
<span class="linenr">13: </span><span style="color: #689d6a;">without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<span class="linenr">14: </span><span style="color: #689d6a;">FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.</span>
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #689d6a;">As additional permission under GNU GPL version 3 section 7, you</span>
<span class="linenr">17: </span><span style="color: #689d6a;">may distribute non-source (e.g., minimized or compacted) forms of</span>
<span class="linenr">18: </span><span style="color: #689d6a;">that code without the copy of the GNU GPL normally required by</span>
<span class="linenr">19: </span><span style="color: #689d6a;">section 4, provided you include this license notice and a URL</span>
<span class="linenr">20: </span><span style="color: #689d6a;">through which recipients can access the Corresponding Source.</span>
<span class="linenr">21: </span>
<span class="linenr">22: </span>
<span class="linenr">23: </span><span style="color: #689d6a;">@licend  The above is the entire license notice</span>
<span class="linenr">24: </span><span style="color: #689d6a;">for the JavaScript code in this tag.</span>
<span class="linenr">25: </span><span style="color: #689d6a;">*/</span>
<span class="linenr">26: </span><span style="color: #689d6a;">&lt;!--/*--&gt;&lt;![CDATA[/*&gt;&lt;!--*/</span>
<span class="linenr">27: </span><span style="color: #689d6a;"> function CodeHighlightOn(elem, id)</span>
<span class="linenr">28: </span><span style="color: #689d6a;"> {</span>
<span class="linenr">29: </span><span style="color: #689d6a;">   var target = document.getElementById(id);</span>
<span class="linenr">30: </span><span style="color: #689d6a;">   if(null != target) {</span>
<span class="linenr">31: </span><span style="color: #689d6a;">     elem.cacheClassElem = elem.className;</span>
<span class="linenr">32: </span><span style="color: #689d6a;">     elem.cacheClassTarget = target.className;</span>
<span class="linenr">33: </span><span style="color: #689d6a;">     target.className = \"code-highlighted\";</span>
<span class="linenr">34: </span><span style="color: #689d6a;">     elem.className   = \"code-highlighted\";</span>
<span class="linenr">35: </span><span style="color: #689d6a;">   }</span>
<span class="linenr">36: </span><span style="color: #689d6a;"> }</span>
<span class="linenr">37: </span><span style="color: #689d6a;"> function CodeHighlightOff(elem, id)</span>
<span class="linenr">38: </span><span style="color: #689d6a;"> {</span>
<span class="linenr">39: </span><span style="color: #689d6a;">   var target = document.getElementById(id);</span>
<span class="linenr">40: </span><span style="color: #689d6a;">   if(elem.cacheClassElem)</span>
<span class="linenr">41: </span><span style="color: #689d6a;">     elem.className = elem.cacheClassElem;</span>
<span class="linenr">42: </span><span style="color: #689d6a;">   if(elem.cacheClassTarget)</span>
<span class="linenr">43: </span><span style="color: #689d6a;">     target.className = elem.cacheClassTarget;</span>
<span class="linenr">44: </span><span style="color: #689d6a;"> }</span>
<span class="linenr">45: </span><span style="color: #689d6a;">/*]]&gt;*///--&gt;</span>
<span class="linenr">46: </span><span style="color: #689d6a;">&lt;/script&gt;"</span>
</pre>
</div>


</details>

<br>
<p style="color: black;"><span style="border-width:1px;border-style:solid;padding:5px"><strong>[Editor Remark:</strong></span>
<p>
Before we move on, I'd like to have heavy red font for links.
</p>

<p>
HERE PLS
</p>

<p>
But this causes the table of contents to be red, which I dislike ლ(ಠ益ಠ)ლ
</p>

<span style="border-width:1px;border-style:solid;padding:5px"><strong>]</strong></span></p>
</div>
</div>

<div id="outline-container-Images" class="outline-2">
<h2 id="Images"><span class="section-number-2">8.</span> <a href="#Images">Article Tile &amp; Image</a></h2>
<div class="outline-text-2" id="text-Images">
<p>
<a id="org9c06119"></a>
</p>

<p>
Every article declaratively has an associated image ^_^
</p>
<ul class="org-ul">
<li>Images are loaded from the <code>~/blog/images/</code> directory, but may be explicit paths or URLs.</li>
<li><p>
If none declared, we use <code>emacs-birthday-present.png</code> :-)
</p>
<center> <img src="http://alhassy.com/images/emacs-birthday-present.png" width=100 height=100> </center>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">cl-defun</span> <span style="color: #076678;">my/org-static-blog-assemble-image</span> (file <span style="color: #b57614;">&amp;optional</span> explicit-image-path-prefix)
  <span style="color: #689d6a;">"Assemble the value of &#8216;#+fileimage: image width height border?&#8217; as an HTML form.</span>

<span style="color: #689d6a;">By default, the image should be located in the top-level `</span><span style="color: #076678; font-weight: bold;">images/</span><span style="color: #689d6a;">' directory.</span>
<span style="color: #689d6a;">If the image is located elsewhere, or is a URL, is dictated by the presence of a `</span><span style="color: #076678; font-weight: bold;">/</span><span style="color: #689d6a;">'</span>
<span style="color: #689d6a;">in the image path.</span>

<span style="color: #689d6a;">Here are 4 example uses:</span>

<span style="color: #689d6a;">#+fileimage: emacs-birthday-present.png</span>
<span style="color: #689d6a;">#+fileimage: ../images/emacs-birthday-present.png</span>
<span style="color: #689d6a;">#+fileimage: https://upload.wikimedia.org/wikipedia/en/6/64/Dora_and_Boots.jpg 350 300</span>
<span style="color: #689d6a;">#+fileimage: https://unsplash.com/photos/Vc2dD4l57og</span>

<span style="color: #689d6a;">+ Notice that the second indicates explicit width and height.</span>
<span style="color: #689d6a;">+ (To make the first approach work with local previews,</span>
<span style="color: #689d6a;">   we need the variable EXPLICIT-IMAGE-PATH-PREFIX which is used for local previews in `</span><span style="color: #076678; font-weight: bold;">my/blog/style-setup</span><span style="color: #689d6a;">'. This requires a slash at the end.)</span>
<span style="color: #689d6a;">+ The unsplash approach is specific: It shows the *main* image in the provided URL, and links to the provided URL.</span>
<span style="color: #689d6a;">"</span>
 (<span style="color: #98971a; font-weight: bold;">with-temp-buffer</span>
   (insert-file-contents file)
   (goto-char 0)
   (search-forward-regexp <span style="color: #689d6a;">"^\\#\\+fileimage: </span><span style="color: #98971a; font-weight: bold;">\\</span><span style="color: #b57614; font-weight: bold;">(</span><span style="color: #689d6a;">.*</span><span style="color: #98971a; font-weight: bold;">\\</span><span style="color: #b57614; font-weight: bold;">)</span><span style="color: #689d6a;">"</span> nil t)
   (<span style="color: #98971a; font-weight: bold;">-let</span> [(image width height no-border?)
          (s-split <span style="color: #689d6a;">" "</span> (substring-no-properties
                        (<span style="color: #98971a; font-weight: bold;">or</span> (match-string 1)
                            <span style="color: #689d6a;">"emacs-birthday-present.png"</span>)))]
     (<span style="color: #98971a; font-weight: bold;">setq</span> width (<span style="color: #98971a; font-weight: bold;">or</span> width 350))
     (<span style="color: #98971a; font-weight: bold;">setq</span> height (<span style="color: #98971a; font-weight: bold;">or</span> height 350))
     (<span style="color: #98971a; font-weight: bold;">setq</span> no-border? (<span style="color: #98971a; font-weight: bold;">if</span> no-border? <span style="color: #689d6a;">""</span> <span style="color: #689d6a;">"style=\"border: 2px solid black;\""</span>))
     (<span style="color: #98971a; font-weight: bold;">cond</span>
      ((s-contains? <span style="color: #689d6a;">"/"</span> image) t) <span style="color: #a89984;">;; </span><span style="color: #a89984;">It's a URL, or explicit path, do nothing to it.</span>
      (explicit-image-path-prefix (<span style="color: #98971a; font-weight: bold;">setq</span> image (format <span style="color: #689d6a;">"%s%s"</span>  explicit-image-path-prefix image)))
      ((not (s-contains? <span style="color: #689d6a;">"/"</span> image)) (<span style="color: #98971a; font-weight: bold;">setq</span> image (format <span style="color: #689d6a;">"images/%s"</span> image)))
       )

     (<span style="color: #98971a; font-weight: bold;">-let</span> [unsplash (cl-second (s-match <span style="color: #689d6a;">".*unsplash.com/photos/</span><span style="color: #98971a; font-weight: bold;">\\</span><span style="color: #b57614; font-weight: bold;">(</span><span style="color: #689d6a;">.*</span><span style="color: #98971a; font-weight: bold;">\\</span><span style="color: #b57614; font-weight: bold;">)</span><span style="color: #689d6a;">"</span> image))]
       (<span style="color: #98971a; font-weight: bold;">setq</span> href (<span style="color: #98971a; font-weight: bold;">if</span> unsplash (concat <span style="color: #689d6a;">"https://unsplash.com/photos/"</span> unsplash) image))
       (<span style="color: #98971a; font-weight: bold;">setq</span> title (format <span style="color: #689d6a;">"Image credit &#8220;%s&#8221;"</span> (<span style="color: #98971a; font-weight: bold;">if</span> unsplash (concat <span style="color: #689d6a;">"https://unsplash.com/photos/"</span> unsplash) image)))
       (<span style="color: #98971a; font-weight: bold;">setq</span> src (<span style="color: #98971a; font-weight: bold;">if</span> unsplash (format <span style="color: #689d6a;">"https://source.unsplash.com/%s/%sx%s"</span> unsplash width height) image))
       (format <span style="color: #689d6a;">"&lt;center&gt;&lt;a href=\"%s\" class=\"tooltip\" title=\"%s\"&gt;&lt;img src=\"%s\" alt=\"Article image\"</span>
<span style="color: #689d6a;">             %s width=\"%s\" height=\"%s\" align=\"top\"/&gt;&lt;/a&gt;&lt;/center&gt;"</span>
             href title src no-border? width height)))))
</pre>
</div></li>
</ul>
</div>

<div id="outline-container-Making-this-work-with-org-notes-style-and-org-static-blog" class="outline-3">
<h3 id="Making-this-work-with-org-notes-style-and-org-static-blog"><span class="section-number-3">8.1.</span> <a href="#Making-this-work-with-org-notes-style-and-org-static-blog">Making this work with <code>org-notes-style</code> and <code>org-static-blog</code></a></h3>
<div class="outline-text-3" id="text-Making-this-work-with-org-notes-style-and-org-static-blog">
<p>
To make use of <code>org-notes-style</code>, I need the title to use the <code>title</code> class
but <code>org-static-blog</code> uses the <code>post-title</code> blog, so I'll override the
<code>org-static-blog</code> preamble method to simply use an auxiliary div.
</p>
<ul class="org-ul">
<li>Along the way, I'll position the article image under the article's title.</li>
<li>Line <a href="#coderef-fixTitle" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-fixTitle');" onmouseout="CodeHighlightOff(this, 'coderef-fixTitle');">9</a>: <code>org-notes-style</code> has too much vertical space after the title,
let's reduce it so that the article's data can follow it smoothly.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span><span style="color: #a89984;">;; </span><span style="color: #a89984;">MA: This can be deleted?? Do a search for post-title in this article to see why?</span>
<span class="linenr"> 2: </span>(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">org-static-blog-post-preamble</span> (post-filename)
<span class="linenr"> 3: </span>  <span style="color: #689d6a;">"Returns the formatted date and headline of the post.</span>
<span class="linenr"> 4: </span><span style="color: #689d6a;">This function is called for every post and prepended to the post body.</span>
<span class="linenr"> 5: </span><span style="color: #689d6a;">Modify this function if you want to change a posts headline."</span>
<span class="linenr"> 6: </span>  (concat
<span class="linenr"> 7: </span>   <span style="color: #a89984;">;; </span><span style="color: #a89984;">The title</span>
<span class="linenr"> 8: </span>   <span style="color: #689d6a;">"&lt;h1 class=\"post-title\"&gt;"</span>
<span id="coderef-fixTitle" class="coderef-off"><span class="linenr"> 9: </span>   <span style="color: #689d6a;">"&lt;div class=\"title\" style=\"margin: 0 0 0 0 !important;\"&gt;"</span></span>
<span class="linenr">10: </span>   <span style="color: #689d6a;">"&lt;a href=\""</span> (org-static-blog-get-post-url post-filename) <span style="color: #689d6a;">"\"&gt;"</span>
<span class="linenr">11: </span>   (org-static-blog-get-title post-filename)
<span class="linenr">12: </span>   <span style="color: #689d6a;">"&lt;/a&gt;"</span>
<span class="linenr">13: </span>   <span style="color: #689d6a;">"&lt;/h1&gt;&lt;/div&gt;"</span>
<span class="linenr">14: </span>   <span style="color: #a89984;">;; </span><span style="color: #a89984;">The date</span>
<span class="linenr">15: </span>   <span style="color: #689d6a;">"&lt;div style=\"text-align: center;\"&gt;"</span>
<span class="linenr">16: </span>   (format-time-string (org-static-blog-gettext 'date-format)
<span class="linenr">17: </span>                       (org-static-blog-get-date post-filename))
<span class="linenr">18: </span>   <span style="color: #689d6a;">"&lt;/div&gt;"</span>
<span class="linenr">19: </span>   <span style="color: #a89984;">;; </span><span style="color: #a89984;">The article's image</span>
<span class="linenr">20: </span>   (my/org-static-blog-assemble-image post-filename)
<span class="linenr">21: </span>   <span style="color: #689d6a;">"&lt;br&gt;&lt;center&gt;&lt;strong&gt;Abstract&lt;/strong&gt;&lt;/center&gt;"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-MathJax-Support" class="outline-2">
<h2 id="MathJax-Support"><span class="section-number-2">9.</span> <a href="#MathJax-Support">MathJax Support &#x2014; \(e^{i \cdot \pi} + 1 = 0\)</a></h2>
<div class="outline-text-2" id="text-MathJax-Support">
<p>
<a id="orgc4bf97e"></a>
</p>

<p>
Org loads the <a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax</a> display engine for mathematics whenever users write LaTeX-style math delimited by <code>$...$</code> or by
<code>\[...\]</code>. Here is an example.
</p>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         The CSS that Org loads by default
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span><span style="color: #689d6a;">"&lt;script type=\"text/x-mathjax-config\"&gt;</span>
<span class="linenr"> 2: </span><span style="color: #689d6a;">    MathJax.Hub.Config({</span>
<span class="linenr"> 3: </span><span style="color: #689d6a;">        displayAlign: \"center\",</span>
<span class="linenr"> 4: </span><span style="color: #689d6a;">        displayIndent: \"0em\",</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #689d6a;">        \"HTML-CSS\": { scale: 100,</span>
<span class="linenr"> 7: </span><span style="color: #689d6a;">                        linebreaks: { automatic: \"false\" },</span>
<span class="linenr"> 8: </span><span style="color: #689d6a;">                        webFont: \"TeX\"</span>
<span class="linenr"> 9: </span><span style="color: #689d6a;">                       },</span>
<span class="linenr">10: </span><span style="color: #689d6a;">        SVG: {scale: 100,</span>
<span class="linenr">11: </span><span style="color: #689d6a;">              linebreaks: { automatic: \"false\" },</span>
<span class="linenr">12: </span><span style="color: #689d6a;">              font: \"TeX\"},</span>
<span class="linenr">13: </span><span style="color: #689d6a;">        NativeMML: {scale: 100},</span>
<span class="linenr">14: </span><span style="color: #689d6a;">        TeX: { equationNumbers: {autoNumber: \"AMS\"},</span>
<span class="linenr">15: </span><span style="color: #689d6a;">               MultLineWidth: \"85%\",</span>
<span class="linenr">16: </span><span style="color: #689d6a;">               TagSide: \"right\",</span>
<span class="linenr">17: </span><span style="color: #689d6a;">               TagIndent: \".8em\"</span>
<span class="linenr">18: </span><span style="color: #689d6a;">             }</span>
<span class="linenr">19: </span><span style="color: #689d6a;">});</span>
<span class="linenr">20: </span><span style="color: #689d6a;">&lt;/script&gt;</span>
<span class="linenr">21: </span><span style="color: #689d6a;">&lt;script type=\"text/javascript\"</span>
<span class="linenr">22: </span><span style="color: #689d6a;">        src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML\"&gt;&lt;/script&gt;</span>
<span class="linenr">23: </span><span style="color: #689d6a;">"</span>
</pre>
</div>


</details>

<br>
<div style="column-rule-style: none nil;column-count: 2;">
<div style="padding: 1em;background-color: cyan;border-radius: 15px;font-size: 0.9em;"> <h3>Source</h3>
<div ><pre class="src src-org">\[ p ⊓ q = p \quad ≡ \quad p ⊔ q = q \label{Golden-Rule}\tag{Golden-Rule}\]

Look at \ref{Golden-Rule}, it says, when specialised to numbers, /the minimum
of two items is the first precisely when the maximum of the two is the second/
---d'uh!
</pre></div>
</div>
<div style="padding: 1em;background-color: cyan;border-radius: 15px;font-size: 0.9em;"> <h3>Result</h3>
<p>
\[ p ⊓ q = p \quad ≡ \quad p ⊔ q = q \label{Golden-Rule}\tag{Golden-Rule}\]
</p>

<p>
Look at \ref{Golden-Rule}, it says, when specialised to numbers, <i>the minimum
of two items is the first precisely when the maximum of the two is the second</i>
&#x2014;d'uh!
</p>

</div>
</div>
</div>

<div id="outline-container-orgd9d7d6c" class="outline-3">
<h3 id="orgd9d7d6c"><span class="section-number-3">9.1.</span> <a href="#orgd9d7d6c">Unicode Warning!</a></h3>
<div class="outline-text-3" id="text-9-1">
<p>
We can make an equation ℰ named 𝒩 and refer to it by ℒ by declaring
<code>\[ℰ \tag{𝒩} \label{ℒ} \]</code> then refer to it with <code>\ref{ℒ}</code>.  However, if 𝒩 contains
Unicode, then the reference will not generally be ‘clickable’ &#x2014;it wont take
you to the equation's declaration site.  For example, \ref{⊑-Definition} (<code>⊑-Definition</code>) below
has Unicode in both its tag and label, and so clicking that link wont go
anywhere, whereas \ref{Order-Definition} has Unicode only in its tag, with the
label being <code>\label{Order-Definition}</code>, and clicking it takes you to the formula.
</p>

<div style="column-rule-style: none nil;column-count: 2;">
<div style="padding: 1em;background-color: cyan;border-radius: 15px;font-size: 0.9em;"> <h3>Source</h3>
<div ><pre class="src src-org">\[ p ⊑ q \quad ≡ \quad p ⊓ q = p \tag{⊑-Definition}\label{⊑-Definition} \]

\[ p ⊑ q \quad ≡ \quad p ⊔ q = q \tag{⊑-Definition}\label{Order-Definition} \]
</pre></div>
</div>
<div style="padding: 1em;background-color: cyan;border-radius: 15px;font-size: 0.9em;"> <h3>Result</h3>
<p>
\[ p ⊑ q \quad ≡ \quad p ⊓ q = p \tag{⊑-Definition}\label{⊑-Definition} \]
</p>

<p>
\[ p ⊑ q \quad ≡ \quad p ⊔ q = q \tag{⊑-Definition}\label{Order-Definition} \]
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org7dd10d9" class="outline-3">
<h3 id="org7dd10d9"><span class="section-number-3">9.2.</span> <a href="#org7dd10d9">Rule Resurrection</a></h3>
<div class="outline-text-3" id="text-9-2">
<p>
The following rule for anchors <code>a {⋯}</code> resurrects <code>\ref{}</code> calls via MathJax
&#x2014;which <code>org-notes-style</code> kills.
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #076678;">a </span>{ <span style="color: #98971a; font-weight: bold;">white-space</span>: pre <span style="color: #7c6f64; font-weight: bold;">!important</span>; }
</pre>
</div>
</div>
</div>

<div id="outline-container-COMMENT-nice-math-spacing" class="outline-3">
<h3 id="COMMENT-nice-math-spacing"><span class="section-number-3">9.3.</span> <a href="#orgee9fb08"><i>Making Math Stick-out with Spacing!</i></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TODO">TODO</span>&#xa0;<span class="LowPriority">LowPriority</span></span></h3>
<div class="outline-text-3" id="text-COMMENT-nice-math-spacing">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">This is low priority, since I'm not writing much math these days.</td>
</tr>
</tbody>
</table>

<p>
Notice how the <i>math expressions</i> stick out in these following sentences:
</p>
<ol class="org-ol">
<li>We use \(x\) as the name of the unknown.</li>
<li>The phrase \(∀ x • ∃ y • x 〔R〕 y\) indicates that relation \(R\) is “total”.</li>
</ol>



<p>
Nice, the following adds extra whitespace around MathJax,
so that math elements have extra whitespace about them
so as to make them stand-out.
</p>
<p>
<b><span style="color:orange;">TODO</span></b>: Actually add the required script to the header code section of my org-static-blog configuration. <b>OR</b> add it
as CSS as was done for the MathJax styling above. <b>OR</b> add to my MathJax.org file? Something to think about.
</p>
</div>
</div>
</div>
<div id="outline-container-https-github-com-bastibe-org-static-blog-org-static-block" class="outline-2">
<h2 id="https-github-com-bastibe-org-static-blog-org-static-block"><span class="section-number-2">10.</span> <a href="#https-github-com-bastibe-org-static-blog-org-static-block">Using <a href="https://github.com/bastibe/org-static-blog">org-static-block</a></a></h2>
<div class="outline-text-2" id="text-https-github-com-bastibe-org-static-blog-org-static-block">
<p>
<a id="orgb5a9163"></a>
</p>

<p>
Let's use <a href="https://github.com/bastibe/org-static-blog">org-static-block</a> to make our blog. Why?
</p>
<ul class="org-ul">
<li>It's a Lisp program smaller than 900 lines, its source is easy to read and
understand, and, most importantly, it was super easy to get started using it
using the <a href="https://github.com/bastibe/org-static-blog#examples">given example</a>.</li>
</ul>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         The necessary basic facts of our blog
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(<span style="color: #98971a; font-weight: bold;">use-package</span> <span style="color: #076678; font-weight: bold;">org-static-blog</span>)
<span class="linenr"> 2: </span>(<span style="color: #98971a; font-weight: bold;">use-package</span> <span style="color: #076678; font-weight: bold;">lf</span>) <span style="color: #a89984;">;; </span><span style="color: #a89984;">So we can use `</span><span style="color: #076678; font-weight: bold;">lf-string</span><span style="color: #a89984;">' for multi-line strings supporting interpolation:</span>
<span class="linenr"> 3: </span><span style="color: #a89984;">;; </span><span style="color: #a89984;">(lf-string "100/2 is ${ (/ 100 2) }; neato!") ;; &#8658; "100/2 is 50; neato!"</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-publish-title <span style="color: #689d6a;">"Life &amp; Computing Science"</span>)
<span class="linenr"> 6: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-publish-url <span style="color: #689d6a;">"https://alhassy.github.io/"</span>)
<span class="linenr"> 7: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-publish-directory <span style="color: #689d6a;">"~/blog/"</span>)
<span class="linenr"> 8: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-posts-directory <span style="color: #689d6a;">"~/blog/posts/"</span>)
<span class="linenr"> 9: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-drafts-directory <span style="color: #689d6a;">"~/blog/drafts/"</span>)
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #a89984;">;; </span><span style="color: #a89984;">Use &#8220;#+filetags: &#964;&#8321; &#964;&#8322; &#8230; &#964;&#8345;&#8221;</span>
<span class="linenr">12: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-static-blog-enable-tags t)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #a89984;">;; </span><span style="color: #a89984;">I'd like to have tocs and numbered headings</span>
<span class="linenr">15: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-export-with-toc t)
<span class="linenr">16: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> org-export-with-section-numbers t)
</pre>
</div>


</details>
</div>

<div id="outline-container-Article-Footers" class="outline-3">
<h3 id="Article-Footers"><span class="section-number-3">10.1.</span> <a href="#Article-Footers">Article Footers: HTMLized Source and Git History</a></h3>
<div class="outline-text-3" id="text-Article-Footers">
<p>
<a id="org79b1cc7"></a>
</p>

<p>
Here is the main function:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">org-static-blog-post-postamble</span> (post-file-name)
<span class="linenr"> 2: </span>  <span style="color: #689d6a;">"Returns the HTML rendering the htmlised source, version history, and comment box at the end of a post.</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #689d6a;">This function is called for every post and the returned string is appended to the post body."</span>
<span class="linenr"> 5: </span>  (concat
<span class="linenr"> 6: </span>   <span style="color: #689d6a;">"&lt;hr&gt;"</span>
<span class="linenr"> 7: </span>   <span style="color: #689d6a;">"&lt;center&gt;"</span>
<span class="linenr"> 8: </span>   (blog/htmlize-file post-file-name)
<span class="linenr"> 9: </span>   <span style="color: #689d6a;">"&amp;ensp;"</span>
<span class="linenr">10: </span>   (blog/history-of-file post-file-name)
<span class="linenr">11: </span>   <span style="color: #a89984;">;;</span>
<span class="linenr">12: </span>   <span style="color: #689d6a;">"&lt;br&gt;"</span>
<span class="linenr">13: </span>   <span style="color: #689d6a;">"&lt;a href=\"https://www.buymeacoffee.com/alhassy\"&gt;&lt;img src="</span>
<span class="linenr">14: </span>   <span style="color: #689d6a;">"\"https://img.shields.io/badge/-buy_me_a%C2%A0coffee-gray?logo=buy-me-a-coffee\"&gt;"</span>
<span class="linenr">15: </span>   <span style="color: #689d6a;">"&lt;/a&gt;"</span>
<span class="linenr">16: </span>   <span style="color: #a89984;">;;</span>
<span class="linenr">17: </span>   <span style="color: #689d6a;">"&lt;br&gt;&lt;strong&gt; Generated by Emacs and Org-mode (&#8226;&#768;&#7447;&#8226;&#769;)&#1608; &lt;/strong&gt;"</span>
<span class="linenr">18: </span>   <span style="color: #a89984;">;; </span><span style="color: #a89984;">org-static-blog-page-postamble</span>
<span class="linenr">19: </span>   (blog/license)
<span class="linenr">20: </span>   <span style="color: #a89984;">;; </span><span style="color: #a89984;">(blog/comments) ;; </span><span style="color: #dc752f;">TODO</span><span style="color: #a89984;">. Not working as intended; low priority.</span>
<span class="linenr">21: </span>   <span style="color: #689d6a;">"&lt;/center&gt;"</span>
<span class="linenr">22: </span>   <span style="color: #a89984;">;; </span><span style="color: #a89984;">The next line is required to make the org-static-blog-assemble-rss method work.</span>
<span class="linenr">23: </span>   <span style="color: #689d6a;">"&lt;div hidden&gt; &lt;div id=\"postamble\" class=\"status\"&gt; &lt;/div&gt; &lt;/div&gt;"</span>
<span class="linenr">24: </span>   (blog/read-remaining-js)))
</pre>
</div>

<p>
Where its helper methods are below:
<abbr class="tooltip" title="Get an HTML listing of tags, as shields.io bages, associated with the given file.">blog/tags-of-file</abbr>,
<abbr class="tooltip" title="Get an HTML badge that points to the Github history of a given file name, in my blog.">blog/history-of-file</abbr>,
<abbr class="tooltip" title="Generate an htmlized version of a given source file; return an HTML badge linking to the colourised file.<br><br>We do not take the extra time to produce a colourised file when we are previewing an article.">blog/htmlize-file</abbr>,
<abbr class="tooltip" title="Get the HTML required to make use of ReadRemaining.js">blog/read-remaining-js</abbr>
<abbr class="tooltip" title="Get HTML for Creative Commons Attribution-ShareAlike 3.0 Unported License.">blog/license</abbr>
<abbr class="tooltip" title="Embed Disqus Comments for my blog">blog/comments</abbr>
</p>
<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Details
                      </font>
                    </strong>
                  </summary>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/tags-of-file</span> (file-name)
  <span style="color: #689d6a;">"Get an HTML listing of tags, as shields.io bages, associated with the given file."</span>
          (concat
   <span style="color: #a89984;">;; </span><span style="color: #a89984;">Straightforward implementation.</span>
   <span style="color: #a89984;">;; </span><span style="color: #a89984;">"&lt;div class=\"taglist\"&gt;"</span>
   <span style="color: #a89984;">;; </span><span style="color: #a89984;">(org-static-blog-post-taglist file-name)</span>
   <span style="color: #a89984;">;; </span><span style="color: #a89984;">"&lt;/div&gt;"</span>

  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Badges implementation</span>
   (<span style="color: #98971a; font-weight: bold;">if</span> (not file-name)
       <span style="color: #689d6a;">""</span>
     (concat
      (format <span style="color: #689d6a;">"&lt;a href=\"https://alhassy.github.io/tags.html\"&gt; %s &lt;/a&gt;"</span>
              (org-link/octoicon <span style="color: #689d6a;">"tag"</span> nil 'html))
      (s-join <span style="color: #689d6a;">" "</span>
              (<span style="color: #98971a; font-weight: bold;">--map</span>  (org-link/badge
                       (format <span style="color: #689d6a;">"|%s|grey|%stag-%s.html"</span>
                               (s-replace <span style="color: #689d6a;">"-"</span> <span style="color: #689d6a;">"_"</span> it)
                               org-static-blog-publish-url it)
                       nil 'html)
                      (org-static-blog-get-tags file-name)))))))

</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/history-of-file</span> (file-name)
  <span style="color: #689d6a;">"Get an HTML badge that points to the Github history of a given file name, in my blog."</span>
  (concat
     <span style="color: #689d6a;">"&lt;a class=\"tooltip\" title=\"See the various edits to this article over time\""</span>
     <span style="color: #689d6a;">"href=\"https://github.com/alhassy/alhassy.github.io/commits/master/"</span>
   <span style="color: #689d6a;">"posts/"</span> (f-base file-name) <span style="color: #689d6a;">".org\"&gt;&lt;img</span>
<span style="color: #689d6a;">   src=\"https://img.shields.io/badge/-History-informational?logo=github\"&gt;&lt;/a&gt;"</span>))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/htmlize-file</span> (file-name)
  <span style="color: #689d6a;">"Generate an htmlized version of a given source file; return an HTML badge linking to the colourised file.</span>

<span style="color: #689d6a;">We do not take the extra time to produce a colourised file when we are previewing an article."</span>
  (<span style="color: #98971a; font-weight: bold;">unless</span> org-preview-html-mode
(<span style="color: #98971a; font-weight: bold;">let</span> ((org-hide-block-startup nil))
  (<span style="color: #98971a; font-weight: bold;">with-temp-buffer</span>
    (find-file file-name)
    <span style="color: #a89984;">;; </span><span style="color: #a89984;">(insert "\n#+HTML_HEAD: &lt;link href=\"../doom-solarized-light.css\" rel=\"stylesheet\"&gt;\n")</span>
    (org-mode)
    (outline-show-all)
    (switch-to-buffer (htmlize-buffer))
    (write-file (concat <span style="color: #689d6a;">"~/blog/"</span> (f-base file-name) <span style="color: #689d6a;">".org.html"</span>))
    (kill-buffer))))
(concat
<span style="color: #689d6a;">"&lt;a class=\"tooltip\" title=\"See the colourised Org source of this article; i.e., what I typed to get this nice webpage\" href=\""</span>
   (f-base file-name) <span style="color: #689d6a;">".org.html\"&gt;&lt;img</span>
<span style="color: #689d6a;">   src=\"https://img.shields.io/badge/-Source-informational?logo=read-the-docs\"&gt;&lt;/a&gt;"</span>))
</pre>
</div>

<p>
<a id="org5ab2572"></a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/license</span> ()
  <span style="color: #689d6a;">"Get HTML for Creative Commons Attribution-ShareAlike 3.0 Unported License."</span>
(s-collapse-whitespace (s-replace <span style="color: #689d6a;">"\n"</span> <span style="color: #689d6a;">""</span>
<span style="color: #689d6a;">"</span>
<span style="color: #689d6a;">&lt;center style=\"font-size: 12px\"&gt;</span>
<span style="color: #689d6a;">  &lt;a rel=\"license\" href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;</span>
<span style="color: #689d6a;">     &lt;img alt=\"Creative Commons License\" style=\"border-width:0\"</span>
<span style="color: #689d6a;">          src=\"https://i.creativecommons.org/l/by-sa/3.0/88x31.png\"/&gt;</span>
<span style="color: #689d6a;">  &lt;/a&gt;</span>

<span style="color: #689d6a;">  &lt;br/&gt;</span>
<span style="color: #689d6a;">  &lt;span xmlns:dct=\"https://purl.org/dc/terms/\"</span>
<span style="color: #689d6a;">        href=\"https://purl.org/dc/dcmitype/Text\"</span>
<span style="color: #689d6a;">        property=\"dct:title\" rel=\"dct:type\"&gt;</span>
<span style="color: #689d6a;">     &lt;em&gt;Life &amp; Computing Science&lt;/em&gt;</span>
<span style="color: #689d6a;">  &lt;/span&gt;</span>

<span style="color: #689d6a;">  by</span>
<span style="color: #689d6a;">  &lt;a xmlns:cc=\"https://creativecommons.org/ns#\"</span>
<span style="color: #689d6a;">  href=\"https://alhassy.github.io/\"</span>
<span style="color: #689d6a;">  property=\"cc:attributionName\" rel=\"cc:attributionURL\"&gt;</span>
<span style="color: #689d6a;">    Musa Al-hassy</span>
<span style="color: #689d6a;">  &lt;/a&gt;</span>

<span style="color: #689d6a;">  is licensed under a</span>
<span style="color: #689d6a;">  &lt;a rel=\"license\" href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;</span>
<span style="color: #689d6a;">    Creative Commons Attribution-ShareAlike 3.0 Unported License</span>
<span style="color: #689d6a;">  &lt;/a&gt;</span>
<span style="color: #689d6a;">&lt;/center&gt;"</span>)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/comments</span> ()
<span class="linenr"> 2: </span>  <span style="color: #689d6a;">"Embed Disqus Comments for my blog"</span>
<span class="linenr"> 3: </span>(s-collapse-whitespace (s-replace <span style="color: #689d6a;">"\n"</span> <span style="color: #689d6a;">""</span>
<span class="linenr"> 4: </span><span style="color: #689d6a;">"</span>
<span class="linenr"> 5: </span><span style="color: #689d6a;">&lt;div id=\"disqus_thread\"&gt;&lt;/div&gt;</span>
<span class="linenr"> 6: </span><span style="color: #689d6a;">&lt;script type=\"text/javascript\"&gt;</span>
<span class="linenr"> 7: </span><span style="color: #689d6a;">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */</span>
<span class="linenr"> 8: </span><span style="color: #689d6a;">var disqus_shortname = '</span><span style="color: #076678; font-weight: bold;">life-and-computing-science</span><span style="color: #689d6a;">';</span>
<span class="linenr"> 9: </span><span style="color: #689d6a;">/* * * DON'T EDIT BELOW THIS LINE * * */</span>
<span class="linenr">10: </span><span style="color: #689d6a;">(function() {</span>
<span class="linenr">11: </span><span style="color: #689d6a;">  var dsq = document.createElement('</span><span style="color: #076678; font-weight: bold;">script</span><span style="color: #689d6a;">');</span>
<span class="linenr">12: </span><span style="color: #689d6a;">  dsq.type = '</span><span style="color: #076678; font-weight: bold;">text/javascript</span><span style="color: #689d6a;">';</span>
<span class="linenr">13: </span><span style="color: #689d6a;">  dsq.async = true;</span>
<span class="linenr">14: </span><span style="color: #689d6a;">  dsq.src = '</span><span style="color: #076678; font-weight: bold;">//</span><span style="color: #689d6a;">' + disqus_shortname + '</span><span style="color: #076678; font-weight: bold;">.disqus.com/embed.js</span><span style="color: #689d6a;">';</span>
<span class="linenr">15: </span><span style="color: #689d6a;">  (document.getElementsByTagName('</span><span style="color: #076678; font-weight: bold;">head</span><span style="color: #689d6a;">')[0] || document.getElementsByTagName('</span><span style="color: #076678; font-weight: bold;">body</span><span style="color: #689d6a;">')[0]).appendChild(dsq);</span>
<span class="linenr">16: </span><span style="color: #689d6a;">    })();</span>
<span class="linenr">17: </span><span style="color: #689d6a;">&lt;/script&gt;</span>
<span class="linenr">18: </span><span style="color: #689d6a;">&lt;noscript&gt;Please enable JavaScript to view the</span>
<span class="linenr">19: </span><span style="color: #689d6a;">    &lt;a href=\"http://disqus.com/?ref_noscript\"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;</span>
<span class="linenr">20: </span><span style="color: #689d6a;">&lt;a href=\"http://disqus.com\" class=\"dsq-brlink\"&gt;comments powered by &lt;span class=\"logo-disqus\"&gt;Disqus&lt;/span&gt;&lt;/a&gt;"</span>)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/read-remaining-js</span> ()
  <span style="color: #689d6a;">"Get the HTML required to make use of ReadRemaining.js"</span>

  <span style="color: #a89984;">;; </span><span style="color: #a89984;">[Maybe Not True] ReadReamining.js does not work well with xWidget browser within Emacs</span>
  (<span style="color: #98971a; font-weight: bold;">if</span> (equal org-preview-html-viewer 'xwidget)
      <span style="color: #689d6a;">""</span>

   <span style="color: #a89984;">;; </span><span style="color: #a89984;">ReadRemaining.js &#8759; How much time is left to finish reading this article?</span>
   <span style="color: #a89984;">;;</span>
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">jQuery already loaded by org-special-block-extras.</span>
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">"&lt;script</span>
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">src=\</span>
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"&gt;&lt;/script&gt;"</span>
 <span style="color: #689d6a;">"&lt;link rel=\"stylesheet\" href=\"readremaining.js-readremainingjs/css/rr_light.css\"</span>
<span style="color: #689d6a;">     type='</span><span style="color: #076678; font-weight: bold;">text/css</span><span style="color: #689d6a;">'/&gt;</span>
<span style="color: #689d6a;">  &lt;script</span>
<span style="color: #689d6a;">     src=\"readremaining.js-readremainingjs/src/readremaining.jquery.js\"&gt;&lt;/script&gt;</span>
<span style="color: #689d6a;">  &lt;script src='</span><span style="color: #076678; font-weight: bold;">readremaining.js/src/readremaining.jquery.js</span><span style="color: #689d6a;">'</span>
<span style="color: #689d6a;">     type='</span><span style="color: #076678; font-weight: bold;">text/javascript</span><span style="color: #689d6a;">'&gt;&lt;/script&gt;</span>
<span style="color: #689d6a;">  &lt;script type=\"text/javascript\"&gt; $('</span><span style="color: #076678; font-weight: bold;">body</span><span style="color: #689d6a;">').readRemaining({showGaugeDelay : 10,</span>
<span style="color: #689d6a;">     showGaugeOnStart : true}); &lt;/script&gt;"</span>))
</pre>
</div>




</details>

<p>
<a href="https://aerolab.github.io/readremaining.js/">ReadRemaining.js</a> gives us a little floating clock on the bottom left of the
screen which says, e.g., <i>4m 9s left</i> when reading an article.
</p>
<ul class="org-ul">
<li>It tells us how much time is left before the article is done.</li>
<li>The time adjusts <i>dynamically</i> as the user scrolls down &#x2014;but not up.</li>
<li>Apparently it has to be at the end of the HTML <code>&lt;body&gt;</code>, otherwise it wont work
for me.
<ul class="org-ul">
<li>It may be best to avoid loading jQuery multiple times; see <a href="https://alhassy.github.io/org-special-block-extras/#tooltipster">here</a> for the necessary conditional.</li>
</ul></li>
</ul>

<p style="color: black;"><span style="border-width:1px;border-style:solid;padding:5px"><strong>[ლ(ಠ益ಠ)ლ:</strong></span>
<p>
I want to consistently use the same theme to htmlize Org source, rather than the <i>current session's</i> theme.
</p>

<span style="border-width:1px;border-style:solid;padding:5px"><strong>]</strong></span></p>
</div>
</div>

<div id="outline-container-multipost-pages" class="outline-3">
<h3 id="multipost-pages"><span class="section-number-3">10.2.</span> <a href="#multipost-pages">The Index Page</a></h3>
<div class="outline-text-3" id="text-multipost-pages">
<p>
<a id="org5d5eac5"></a>
</p>

<p>
I'd like to be able to quickly change the blurb on the index page, so we make a
variable for that &#x2014;consisting of Org-markup.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr">1: </span>(<span style="color: #98971a; font-weight: bold;">setq</span> index-content-header
<span class="linenr">2: </span>  (concat
<span class="linenr">3: </span>   <span style="color: #689d6a;">"Here are some of my latest thoughts..."</span>
<span class="linenr">4: </span>   <span style="color: #689d6a;">" badge:Made_with|Lisp such as doc:thread-first and doc:loop (&#8226;&#768;&#7447;&#8226;&#769;)&#1608;"</span>
<span class="linenr">5: </span>   <span style="color: #689d6a;">" tweet:https://alhassy.github.io/"</span>))
</pre>
</div>

<p>
The actual look and feel of <code>index.html</code> is due to the method <abbr class="tooltip" title="Assemble a page that contains multiple posts “previews” one after another.<br><br>- Each “preview” consists of a post’s title, tags, image, and abstract.<br>- Previews are sorted in descending time.<br><br>You can view the generated ~<em>blog</em>index.html by invoking:<br>&emsp; (progn (my/blog/style-setup/disable) (org-static-blog-assemble-index))<br>">org-static-blog-assemble-multipost-page</abbr>.
</p>

<details class="code-details"
                 style ="padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;">
                  <summary>
                    <strong>
                      <font face="Courier" size="3" color="green">
                         Details
                      </font>
                    </strong>
                  </summary>
<p>
The existing org-static-blog-assemble-index is really fast,
since it just dumps articles wholesale into the landing page; not ideal.
I'd rather have a ‘preview’ of articles.
</p>

<p>
The index page is a multipost page, so I'll override the
<code>org-static-blog-assemble-multipost-page</code> method so that articles are
summarised by their title, data &amp; image, ‘abstract’, and a read-more badge.
</p>
<ul class="org-ul">
<li>Every article is intended to have a section named <code>Abstract</code>, whose contents
are used as the preview of the article. See §<a href="#orga2c51ff">12</a> for a template.</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">org-static-blog-assemble-multipost-page</span>
<span class="linenr"> 2: </span>    (pub-filename post-filenames <span style="color: #b57614;">&amp;optional</span> front-matter)
<span class="linenr"> 3: </span>  <span style="color: #689d6a;">"Assemble a page that contains multiple posts &#8220;previews&#8221; one after another.</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #689d6a;">- Each &#8220;preview&#8221; consists of a post's title, tags, image, and abstract.</span>
<span class="linenr"> 6: </span><span style="color: #689d6a;">- Previews are sorted in descending time.</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #689d6a;">You can view the generated ~/blog/index.html by invoking:</span>
<span class="linenr"> 9: </span><span style="color: #689d6a;">   (progn (my/blog/style-setup/disable) (org-static-blog-assemble-index))</span>
<span class="linenr">10: </span><span style="color: #689d6a;">"</span>
<span class="linenr">11: </span>  (<span style="color: #98971a; font-weight: bold;">setq</span> show-reading-time nil) <span style="color: #a89984;">;; </span><span style="color: #a89984;">Experimental.</span>
<span class="linenr">12: </span>  (<span style="color: #98971a; font-weight: bold;">setq</span> post-filenames
<span class="linenr">13: </span>        (sort post-filenames (<span style="color: #98971a; font-weight: bold;">lambda</span> (x y)
<span class="linenr">14: </span>                               (time-less-p (org-static-blog-get-date y)
<span class="linenr">15: </span>                                            (org-static-blog-get-date x)))))
<span class="linenr">16: </span>
<span class="linenr">17: </span>  (<span style="color: #98971a; font-weight: bold;">let</span> ((org-header (concat <span style="color: #689d6a;">"#+EXPORT_FILE_NAME: "</span> pub-filename
<span class="linenr">18: </span>                            <span style="color: #689d6a;">"\n#+options: toc:nil title:nil html-postamble:nil"</span>
<span class="linenr">19: </span>                            <span style="color: #689d6a;">"\n#+title: "</span> (<span style="color: #98971a; font-weight: bold;">if</span> (equal <span style="color: #689d6a;">"index"</span> (f-base pub-filename))
<span class="linenr">20: </span>                                              org-static-blog-publish-title
<span class="linenr">21: </span>                                            (f-base pub-filename))
<span class="linenr">22: </span>                            <span style="color: #689d6a;">"\n#+begin_export html\n "</span>
<span class="linenr">23: </span>                            org-static-blog-page-preamble
<span class="linenr">24: </span>                            org-static-blog-page-header
<span class="linenr">25: </span>                            (<span style="color: #98971a; font-weight: bold;">if</span> front-matter front-matter <span style="color: #689d6a;">""</span>)
<span class="linenr">26: </span>                            <span style="color: #689d6a;">"\n#+end_export"</span>
<span class="linenr">27: </span>                            <span style="color: #a89984;">;; </span><span style="color: #a89984;">Extra styling of abstracts.</span>
<span class="linenr">28: </span>                            <span style="color: #a89984;">;; </span><span style="color: #a89984;">Works; but not needed.</span>
<span class="linenr">29: </span>                            <span style="color: #a89984;">;; </span><span style="color: #a89984;">"\n#+HTML_HEAD_EXTRA: &lt;style&gt; div.abstract {background-color: pink !important;} &lt;/style&gt;"</span>
<span class="linenr">30: </span>                            ))
<span class="linenr">31: </span>        (index-header (<span style="color: #98971a; font-weight: bold;">if</span> (equal <span style="color: #689d6a;">"index"</span> (f-base pub-filename))
<span class="linenr">32: </span>                          (format <span style="color: #689d6a;">"#+begin_export html\n%s\n#+end_export\n%s"</span>
<span class="linenr">33: </span>                                  org-static-blog-page-header index-content-header)
<span class="linenr">34: </span>                        <span style="color: #689d6a;">""</span>))
<span class="linenr">35: </span>        (_ (view-echo-area-messages))
<span class="linenr">36: </span>        (abstracts-of-posts (<span style="color: #98971a; font-weight: bold;">--map</span>
<span class="linenr">37: </span>                             (concat
<span class="linenr">38: </span>                              (<span style="color: #98971a; font-weight: bold;">progn</span> (message <span style="color: #689d6a;">"Processing %s..."</span> it) <span style="color: #689d6a;">""</span>) <span style="color: #a89984;">;; </span><span style="color: #a89984;">Progress indicator</span>
<span class="linenr">39: </span>
<span class="linenr">40: </span>                              <span style="color: #a89984;">;; </span><span style="color: #a89984;">&#10216;0&#10217; Title and link to article</span>
<span class="linenr">41: </span>                              (format <span style="color: #689d6a;">"#+HTML: &lt;h2 class=\"title\"&gt;&lt;a href=\"%s\"&gt; %s&lt;/a&gt;&lt;/h2&gt;"</span>
<span class="linenr">42: </span>                                      (concat org-static-blog-publish-url (f-base it))
<span class="linenr">43: </span>                                      (org-static-blog-get-title it))
<span class="linenr">44: </span>
<span class="linenr">45: </span>                              <span style="color: #a89984;">;; </span><span style="color: #a89984;">&#10216;1&#10217; Tags and reading time</span>
<span class="linenr">46: </span>                              (format <span style="color: #689d6a;">"\n#+begin_export html\n&lt;center&gt;%s\n%s&lt;/center&gt;\n#+end_export"</span>
<span class="linenr">47: </span>                                      (blog/tags-of-file it)
<span class="linenr">48: </span>                                      <span style="color: #a89984;">;; </span><span style="color: #a89984;">Experimenting.</span>
<span class="linenr">49: </span>                                      (<span style="color: #98971a; font-weight: bold;">if</span> (not show-reading-time)
<span class="linenr">50: </span>                                          <span style="color: #689d6a;">""</span>
<span class="linenr">51: </span>                                        (format <span style="color: #689d6a;">"\n%s %s mins read"</span>
<span class="linenr">52: </span>                                                <span style="color: #689d6a;">"octoicon:clock"</span>
<span class="linenr">53: </span>                                                (<span style="color: #98971a; font-weight: bold;">with-temp-buffer</span> (insert-file-contents it)
<span class="linenr">54: </span>                                                                  (org-ascii-export-as-ascii)
<span class="linenr">55: </span>                                                                  (<span style="color: #98971a; font-weight: bold;">setq</span> __x
<span class="linenr">56: </span>                                                                        (count-words (point-min) (point-max)))
<span class="linenr">57: </span>                                                                  (kill-buffer <span style="color: #689d6a;">"*Org ASCII Export*"</span>)
<span class="linenr">58: </span>                                                                  (delete-other-windows)
<span class="linenr">59: </span>                                                                  (/ __x 200)))) <span style="color: #a89984;">;; </span><span style="color: #a89984;">200 words per minute reading</span>
<span class="linenr">60: </span>                                      )
<span class="linenr">61: </span>
<span class="linenr">62: </span>                              <span style="color: #a89984;">;; </span><span style="color: #a89984;">&#10216;2&#10217; Article image</span>
<span class="linenr">63: </span>                              (format <span style="color: #689d6a;">"\n</span><span style="color: #af3a03; font-weight: bold;">@@html</span><span style="color: #689d6a;">:%s@@\n"</span> (my/org-static-blog-assemble-image it))
<span class="linenr">64: </span>
<span class="linenr">65: </span>                              <span style="color: #a89984;">;; </span><span style="color: #a89984;">&#10216;3&#10217; Preview</span>
<span class="linenr">66: </span>                              (format <span style="color: #689d6a;">"\n#+INCLUDE: \"%s::*Abstract\" :only-contents t"</span> it)
<span class="linenr">67: </span>
<span class="linenr">68: </span>                              <span style="color: #a89984;">;; </span><span style="color: #a89984;">&#10216;4&#10217; &#8220;Read more&#8221; link</span>
<span class="linenr">69: </span>                              (format (concat <span style="color: #689d6a;">"\n</span><span style="color: #af3a03; font-weight: bold;">@@html:&lt;p style=\"text-align</span><span style="color: #689d6a;">:right\"&gt;@@"</span>
<span class="linenr">70: </span>                                              <span style="color: #689d6a;">" badge:Read|more|green|%s|read-the-docs </span><span style="color: #af3a03; font-weight: bold;">@@html</span><span style="color: #689d6a;">:&lt;/p&gt;@@"</span>)
<span class="linenr">71: </span>                                      (concat org-static-blog-publish-url (f-base it))))
<span class="linenr">72: </span>                             post-filenames))
<span class="linenr">73: </span>        <span style="color: #a89984;">;; </span><span style="color: #a89984;">This is the bottom-most matter in the index.html page</span>
<span class="linenr">74: </span>        (show-older-posts (concat  <span style="color: #689d6a;">"\n#+begin_export html\n"</span>
<span class="linenr">75: </span>                                   <span style="color: #689d6a;">"&lt;hr&gt; &lt;div id=\"archive\"&gt;"</span>
<span class="linenr">76: </span>                                   <span style="color: #689d6a;">"&lt;a href=\""</span>
<span class="linenr">77: </span>                                   (org-static-blog-get-absolute-url org-static-blog-archive-file)
<span class="linenr">78: </span>                                   <span style="color: #689d6a;">"\"&gt;"</span> (org-static-blog-gettext 'other-posts) <span style="color: #689d6a;">"&lt;/a&gt;"</span>
<span class="linenr">79: </span>                                   <span style="color: #689d6a;">"&lt;/div&gt;"</span>
<span class="linenr">80: </span>                                   <span style="color: #689d6a;">"&lt;/div&gt;"</span>
<span class="linenr">81: </span>                                   (blog/license)
<span class="linenr">82: </span>                                   <span style="color: #689d6a;">"\n#+end_export"</span>)))
<span class="linenr">83: </span>    (<span style="color: #98971a; font-weight: bold;">with-temp-buffer</span>
<span class="linenr">84: </span>      (insert (s-join <span style="color: #689d6a;">"\n\n"</span> (list org-header
<span class="linenr">85: </span>                                   index-header
<span class="linenr">86: </span>                                   (s-join <span style="color: #689d6a;">"\n\n"</span> abstracts-of-posts)
<span class="linenr">87: </span>                                   show-older-posts)))
<span class="linenr">88: </span>      (org-mode)
<span class="linenr">89: </span>      (org-html-export-to-html))))
</pre>
</div>


</details>
</div>
</div>
</div>
<div id="outline-container-org31f83af" class="outline-2">
<h2 id="org31f83af"><span class="section-number-2">11.</span> <a href="#org31f83af">Actually publishing an article</a></h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #98971a; font-weight: bold;">cl-defun</span> <span style="color: #076678;">blog/git</span> (cmd <span style="color: #b57614;">&amp;rest</span> args)
  <span style="color: #689d6a;">"Execute git command CMD, which may have %s placeholders whose values are positional in ARGS."</span>
  (shell-command (apply #'format (concat <span style="color: #689d6a;">"cd ~/blog; git "</span> cmd) args)))

(<span style="color: #98971a; font-weight: bold;">cl-defun</span> <span style="color: #076678;">blog/publish-current-article</span> ()
  <span style="color: #689d6a;">"Place HTML files in the right place, update arhives, index, rss, tags; git push!"</span>
  (<span style="color: #98971a; font-weight: bold;">interactive</span>)
    (blog/git <span style="color: #689d6a;">"add %s"</span> (buffer-file-name))
  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Placed article html into the published blog directory</span>
  (blog/preview)
  (save-buffer)
  (<span style="color: #98971a; font-weight: bold;">-let</span> [article (concat (f-base (buffer-file-name)) <span style="color: #689d6a;">".html"</span>)]
    (shell-command (concat <span style="color: #689d6a;">"mv "</span> article <span style="color: #689d6a;">" ~/blog/"</span>))
    (blog/git <span style="color: #689d6a;">"add %s %s"</span> (buffer-file-name) article))

  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Updated index.html, tags, archive, and rss to now include this new article</span>

  <span style="color: #a89984;">;; </span><span style="color: #a89984;">Need to disable my export-preprocessing hooks, when using org-static-blog utils.</span>
  (blog/preview/disable)
  (view-echo-area-messages)

  (message <span style="color: #689d6a;">"&#8658; HTMLizing article..."</span>)
  (blog/htmlize-file (buffer-file-name))
  (blog/git <span style="color: #689d6a;">"add %s.org.html"</span> (f-base (buffer-file-name)))

  (message <span style="color: #689d6a;">"&#8658; Assembling tags..."</span>)
  (org-static-blog-assemble-tags)
  (blog/git <span style="color: #689d6a;">"add tag*"</span>)

  (message <span style="color: #689d6a;">"&#8658; Assembling archive..."</span>)
  (org-static-blog-assemble-archive)
  (blog/git <span style="color: #689d6a;">"add archive.html"</span>)

  (message <span style="color: #689d6a;">"&#8658; Assembling RSS feed..."</span>)
  (org-static-blog-assemble-rss)
  (blog/git <span style="color: #689d6a;">"add rss.xml"</span>)

  (message <span style="color: #689d6a;">"&#8658; Assembling landing page..."</span>)
  (org-static-blog-assemble-index)
  (blog/git <span style="color: #689d6a;">"add index.html"</span>)

  (blog/git <span style="color: #689d6a;">"commit -m \"%s\"; git push"</span>
            (<span style="color: #98971a; font-weight: bold;">if</span> current-prefix-arg
                (read-string <span style="color: #689d6a;">"Commit message: "</span>)
              (format <span style="color: #689d6a;">"Publish: Article %s.org"</span> (f-base (buffer-file-name)))))

  (message <span style="color: #689d6a;">"&#8658; It may take up 20secs to 1minute for changes to be live at alhassy.com; congratulations!"</span>))


</pre>
</div>
</div>
</div>

<div id="outline-container-blog-new-article" class="outline-2">
<h2 id="blog-new-article"><span class="section-number-2">12.</span> <a href="#blog-new-article">Getting Started:  <code>blog/new-article</code></a></h2>
<div class="outline-text-2" id="text-blog-new-article">
<p>
<a id="orga2c51ff"></a>
</p>

<p>
Helper function to make a new article.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(<span style="color: #98971a; font-weight: bold;">defvar</span> <span style="color: #076678;">blog/tags</span>
<span class="linenr"> 2: </span>  '(emacs faith category-theory order-theory
<span class="linenr"> 3: </span>    lisp types packages haskell agda
<span class="linenr"> 4: </span>    c frama-c program-proving)
<span class="linenr"> 5: </span>  <span style="color: #689d6a;">"Tags for my blog articles."</span>)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>(<span style="color: #98971a; font-weight: bold;">defun</span> <span style="color: #076678;">blog/new-article</span> ()
<span class="linenr"> 8: </span><span style="color: #689d6a;">"Make a new article for my blog; prompting for the necessary ingredients.</span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #689d6a;">If the filename entered already exists, we simply write to it.</span>
<span class="linenr">11: </span><span style="color: #689d6a;">The user notices this and picks a new name.</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #689d6a;">This sets up a new article based on existing tags and posts.</span>
<span class="linenr">14: </span><span style="color: #689d6a;">+ Use C-SPC to select multiple tag items</span>
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #689d6a;">Moreover it also enables `</span><span style="color: #076678; font-weight: bold;">org-preview-html-mode</span><span style="color: #689d6a;">' so that on every alteration,</span>
<span class="linenr">17: </span><span style="color: #689d6a;">followed by a save, C-x C-s, will result in a live preview of the blog article,</span>
<span class="linenr">18: </span><span style="color: #689d6a;">nearly instantaneously."</span>
<span class="linenr">19: </span>  (<span style="color: #98971a; font-weight: bold;">interactive</span>)
<span class="linenr">20: </span>  (<span style="color: #98971a; font-weight: bold;">let</span> (file desc)
<span class="linenr">21: </span>
<span class="linenr">22: </span>    (<span style="color: #98971a; font-weight: bold;">thread-last</span> org-static-blog-posts-directory
<span class="linenr">23: </span>      f-entries
<span class="linenr">24: </span>      (mapcar #'f-filename)
<span class="linenr">25: </span>      (completing-read <span style="color: #689d6a;">"Filename (Above are existing): "</span>)
<span class="linenr">26: </span>      (concat org-static-blog-posts-directory)
<span class="linenr">27: </span>      (<span style="color: #98971a; font-weight: bold;">setq</span> file))
<span class="linenr">28: </span>
<span class="linenr">29: </span>    <span style="color: #a89984;">;; </span><span style="color: #a89984;">For some reason, &#8216;</span><span style="color: #076678; font-weight: bold;">find-file</span><span style="color: #a89984;">&#8217; in the thread above</span>
<span class="linenr">30: </span>    <span style="color: #a89984;">;; </span><span style="color: #a89984;">wont let the completing-read display the possible completions.</span>
<span class="linenr">31: </span>    (find-file file)
<span class="linenr">32: </span>
<span class="linenr">33: </span>    (insert <span style="color: #689d6a;">"#+title: "</span> (read-string <span style="color: #689d6a;">"Title: "</span>)
<span class="linenr">34: </span>            <span style="color: #689d6a;">"\n#+author: "</span> user-full-name
<span class="linenr">35: </span>            <span style="color: #689d6a;">"\n#+email: "</span>  user-mail-address
<span class="linenr">36: </span>            <span style="color: #689d6a;">"\n#+date: "</span> (format-time-string <span style="color: #689d6a;">"&lt;%Y-%m-%d %H:%M&gt;"</span>)
<span class="linenr">37: </span>            <span style="color: #689d6a;">"\n#+filetags: "</span> (s-join <span style="color: #689d6a;">" "</span> (helm-comp-read <span style="color: #689d6a;">"Tags: "</span>
<span class="linenr">38: </span>                                                         blog/tags
<span class="linenr">39: </span>                                                         <span style="color: #7c6f64; font-weight: bold;">:marked-candidates</span> t))
<span class="linenr">40: </span>            <span style="color: #689d6a;">"\n#+fileimage: "</span> (completing-read
<span class="linenr">41: </span>                               <span style="color: #689d6a;">"Image: "</span>
<span class="linenr">42: </span>                               (mapcar #'f-filename (f-entries <span style="color: #689d6a;">"~/blog/images/"</span>)))
<span class="linenr">43: </span>            <span style="color: #689d6a;">"\n#+include: ../MathJaxPreamble.org"</span> <span style="color: #a89984;">;; </span><span style="color: #dc752f;">TODO</span><span style="color: #a89984;">. Is this someting I actually want here? If so, then consider tangling it from AlBasmala! (and add the whitespace-MathJax setup from above!)</span>
<span class="linenr">44: </span>            <span style="color: #689d6a;">"\n#+description: "</span>
<span class="linenr">45: </span>               (<span style="color: #98971a; font-weight: bold;">setq</span> desc (read-string <span style="color: #689d6a;">"Article Purpose: "</span>))
<span class="linenr">46: </span>            <span style="color: #689d6a;">"\n\n* Abstract :ignore: \n #+begin_abstract\n"</span> desc
<span class="linenr">47: </span>            <span style="color: #689d6a;">"\n#+end_abstract"</span>
<span class="linenr">48: </span>            <span style="color: #689d6a;">"\n\n* ???"</span>)
<span class="linenr">49: </span>    (blog/preview)))
</pre>
</div>

<p>
<a id="org4de258e"></a>
</p>

<p>
The <code>#+description</code> is exported as HTML meta-data which is used to
‘unfurl’ a link to an article: When a link to an article is pasted
in a social media website, it <i>unfurls</i> into a little card showing
some information about the link, such as its image, description, and author.
</p>
<ul class="org-ul">
<li>For long descriptions, one can use multiple <code>#+description</code> lines;
I'd like to have a terse one-liner with a longer description in the
<code>Abstract</code> heading.</li>
</ul>
</div>
</div>

<div id="outline-container-the-name" class="outline-2">
<h2 id="the-name"><span class="section-number-2">13.</span> <a href="#the-name">The name: <a href="https://en.wikipedia.org/wiki/Basmala">al-bas-mala</a></a></h2>
<div class="outline-text-2" id="text-the-name">
<p>
The prefix <i>al</i> is the Arabic definite particle which may correspond to English's <i>the</i>;
whereas <i>basmala</i> refers to a beginning.
</p>

<p>
That is, this is a variation on the traditional <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">"hello world"</a> ;-)
</p>
</div>
</div>

<div id="outline-container-COMMENT-Using-a-Custom-Domain-alhassy-com" class="outline-2">
<h2 id="COMMENT-Using-a-Custom-Domain-alhassy-com"><span class="section-number-2">14.</span> <a href="#COMMENT-Using-a-Custom-Domain-alhassy-com">Appendix: Using a Custom Domain: <code>alhassy.com</code></a></h2>
<div class="outline-text-2" id="text-COMMENT-Using-a-Custom-Domain-alhassy-com">
<ol class="org-ol">
<li>Go to your repo: <a href="https://github.com/alhassy/alhassy.github.io/settings/pages">https://github.com/alhassy/alhassy.github.io/settings/pages</a></li>
<li>Add a <code>Custom Domain</code> such as an “apex domain” like <code>alhassy.com</code> (or a www domain like <code>www.alhassy.com</code>)
<ul class="org-ul">
<li>Apex domains require <code>A</code> records to be setup on your DNS provider.</li>
<li>www domains require <code>CNAME</code> records.</li>
<li>On my DNS provider, I setup both: That way, with or without <code>www.</code>, people will arrive at my blog.</li>
</ul></li>
<li><p>
Go to your DNS provider, and add two records
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-right">Priority</th>
<th scope="col" class="org-left">Content</th>
<th scope="col" class="org-right">TTL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CNAME</td>
<td class="org-left">www</td>
<td class="org-right">0</td>
<td class="org-left">alhassy.github.io</td>
<td class="org-right">14400</td>
</tr>

<tr>
<td class="org-left">CNAME</td>
<td class="org-left">@</td>
<td class="org-right">0</td>
<td class="org-left">alhassy.github.io</td>
<td class="org-right">14400</td>
</tr>
</tbody>
</table></li>
<li>In a terminal, run: <code>dig www.alhassy.com +nostats +nocomments +nocmd</code>
<ul class="org-ul">
<li>The <code>www.</code> is intentional.</li>
</ul></li>

<li><p>
You should see something like:
</p>
<pre class="example" id="org77599a1">
    www.alhassy.com.	14400	IN	CNAME	alhassy.github.io.
    alhassy.github.io.	3600	IN	A	185.199.111.153
    alhassy.github.io.	3600	IN	A	185.199.108.153
    alhassy.github.io.	3600	IN	A	185.199.109.153
    alhassy.github.io.	3600	IN	A	185.199.110.153
</pre>

<p>
This says that it may take 3600 seconds, or 1hour, for the redirect of <code>alhassy.com</code> to
<code>alhassy.github.io</code> to be completed. It may take longer; keep reading.
</p></li>

<li><p>
In your DNS provider, add 4 records, one for each IP Address you got from the <code>dig</code> command.
(These addresses are also on the official Github <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">docs</a>).
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-right">Priority</th>
<th scope="col" class="org-right">Content</th>
<th scope="col" class="org-right">TTL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">A</td>
<td class="org-left">@</td>
<td class="org-right">0</td>
<td class="org-right">185.199.108.153</td>
<td class="org-right">14400</td>
</tr>

<tr>
<td class="org-left">A</td>
<td class="org-left">@</td>
<td class="org-right">0</td>
<td class="org-right">185.199.109.153</td>
<td class="org-right">14400</td>
</tr>

<tr>
<td class="org-left">A</td>
<td class="org-left">@</td>
<td class="org-right">0</td>
<td class="org-right">185.199.110.153</td>
<td class="org-right">14400</td>
</tr>

<tr>
<td class="org-left">A</td>
<td class="org-left">@</td>
<td class="org-right">0</td>
<td class="org-right">185.199.111.153</td>
<td class="org-right">14400</td>
</tr>
</tbody>
</table></li>

<li>Run <code>dig alhassy.com +noall +answer -t A</code> and ensure it points to these IP addresses.
<ul class="org-ul">
<li>Notice the lack of a <code>www.</code></li>
</ul></li>

<li>Open an incognito browser, private browsing session, and navigate to <code>alhassy.com</code>.
<ol class="org-ol">
<li>If this redirects to your <code>alhassy.github.io</code> blog, then joy!
<ul class="org-ul">
<li>If the redirect does not happen in your non-incognito browser, just clear your browsing history and try again.</li>
</ul></li>
<li>Otherwise, it may take some time (something like 1/2hour to 3 days) for the DNS propagation
to be completed.
<ul class="org-ul">
<li>You can check the progress by using a <a href="https://www.whatsmydns.net/#A/alhassy.com">service like this</a>.</li>
<li>It took me about 1/2hour for the URL to redirect to my github.io blog.</li>
</ul></li>
</ol></li>
</ol>

<p>
Further resources:
</p>
<ul class="org-ul">
<li><a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">Managing a custom domain for your GitHub Pages site - GitHub Docs</a></li>
<li><a href="https://richpauloo.github.io/2019-11-17-Linking-a-Custom-Domain-to-Github-Pages/">Linking A Custom Domain To Github Pages</a></li>
</ul>
</div>
</div>

<p>
<hr><center><a class="tooltip" title="See the colourised Org source of this article; i.e., what I typed to get this nice webpage" href="AlBasmala.org.html"><img
   src="https://img.shields.io/badge/-Source-informational?logo=read-the-docs"></a>&ensp;<a class="tooltip" title="See the various edits to this article over time"href="https://github.com/alhassy/alhassy.github.io/commits/master/posts/AlBasmala.org"><img
   src="https://img.shields.io/badge/-History-informational?logo=github"></a><br><a href="https://www.buymeacoffee.com/alhassy"><img src="https://img.shields.io/badge/-buy_me_a%C2%A0coffee-gray?logo=buy-me-a-coffee"></a><br><strong> Generated by Emacs and Org-mode (•̀ᴗ•́)و </strong><center style="font-size: 12px"> <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"> <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"/> </a> <br/> <span xmlns:dct="https://purl.org/dc/terms/" href="https://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type"> <em>Life & Computing Science</em> </span> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://alhassy.github.io/" property="cc:attributionName" rel="cc:attributionURL"> Musa Al-hassy </a> is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"> Creative Commons Attribution-ShareAlike 3.0 Unported License </a></center></center><div hidden> <div id="postamble" class="status"> </div> </div>
</p>
</div>
</body>
</html>
